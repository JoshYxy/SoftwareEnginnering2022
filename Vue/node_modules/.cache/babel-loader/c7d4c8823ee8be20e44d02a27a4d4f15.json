{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b301a570\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"admin\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"信息录入\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"提交\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createVNode(_component_el_form, {\n    id: \"container\",\n    ref: \"userData\",\n    model: $data.userData,\n    rules: $data.rules,\n    autocomplete: \"on\",\n    \"label-position\": \"left\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"role\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" label=\\\"Activity zone\\\"  \"), _createVNode(_component_el_select, {\n        modelValue: $data.userData.role,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userData.role = $event),\n        placeholder: \"角色\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_option, {\n          label: \"学生\",\n          value: \"student\"\n        }), _createVNode(_component_el_option, {\n          label: \"教师\",\n          value: \"teacher\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"name\",\n        modelValue: $data.userData.name,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userData.name = $event),\n        placeholder: \"姓名\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), $data.userData.role === 'student' ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      prop: \"stu_id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"stu_id\",\n        modelValue: $data.userData.stu_id,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userData.stu_id = $event),\n        modelModifiers: {\n          number: true\n        },\n        placeholder: \"学号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), $data.userData.role === 'teacher' ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 1,\n      prop: \"teach_id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"teach_id\",\n        modelValue: $data.userData.teach_id,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.userData.teach_id = $event),\n        modelModifiers: {\n          number: true\n        },\n        placeholder: \"工号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, {\n      prop: \"id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        name: \"id\",\n        modelValue: $data.userData.id,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.userData.id = $event),\n        placeholder: \"身份证号\",\n        type: \"text\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"phone\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"phone\",\n        modelValue: $data.userData.phone,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.userData.phone = $event),\n        placeholder: \"手机号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"email\",\n        modelValue: $data.userData.email,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.userData.email = $event),\n        placeholder: \"邮箱\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.submit\n      }, {\n        default: _withCtx(() => [_hoisted_3]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_createVNode","_component_el_form","id","ref","model","$data","rules","autocomplete","_component_el_form_item","prop","_createCommentVNode","_component_el_select","role","$event","placeholder","_component_el_option","label","value","_component_el_input","type","name","_createBlock","stu_id","number","teach_id","phone","email","_component_el_button","onClick","$options"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab2\\Vue\\src\\views\\AdminControl.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin\">\r\n    <h1>信息录入</h1>\r\n    \r\n    <el-form id=\"container\" ref=\"userData\" :model=\"userData\" :rules=\"rules\" autocomplete=\"on\" label-position=\"left\">\r\n      <el-form-item prop=\"role\">\r\n        <!-- label=\"Activity zone\"  -->\r\n        <el-select v-model=\"userData.role\" placeholder=\"角色\">\r\n          <el-option label=\"学生\" value=\"student\"></el-option>\r\n          <el-option label=\"教师\" value=\"teacher\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"name\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          v-model=\"userData.name\"\r\n          placeholder=\"姓名\"\r\n        />\r\n      </el-form-item> \r\n\r\n      <el-form-item v-if=\"userData.role==='student'\" prop=\"stu_id\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"stu_id\"\r\n          v-model.number=\"userData.stu_id\"\r\n          placeholder=\"学号\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item v-if=\"userData.role==='teacher'\" prop=\"teach_id\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"teach_id\"\r\n          v-model.number=\"userData.teach_id\"\r\n          placeholder=\"工号\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"id\">\r\n        <el-input\r\n          name=\"id\"\r\n          v-model=\"userData.id\"\r\n          placeholder=\"身份证号\"\r\n          type=\"text\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"phone\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          v-model=\"userData.phone\"\r\n          placeholder=\"手机号\"\r\n        />\r\n      </el-form-item> \r\n\r\n      <el-form-item prop=\"email\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          v-model=\"userData.email\"\r\n          placeholder=\"邮箱\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submit\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport axios from 'axios'\r\n//格式检查\r\nvar validName = (rule, value, callback) => {\r\n    const reg = /^[A-Za-z\\u4E00-\\u9FA5]+$/\r\n    if (reg.test(value)) {\r\n        callback()\r\n      } else {\r\n        return callback(new Error('姓名必须为汉字或英语'))\r\n      }\r\n}\r\nvar validPhone = (rule, value, callback) => {\r\n  if (value.length != 11 && value.length != 0) {\r\n    callback(new Error('电话号码必须为11位'))\r\n  } else{\r\n      const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n      if (reg.test(value) || value.length == 0) {\r\n          callback()\r\n        } else {\r\n          return callback(new Error('手机号码必须为1开头的符合规则的11位数字'))\r\n        }\r\n    }\r\n}\r\nvar validPassport = (rule, value, callback) => {\r\n  if (value.length != 18) {\r\n    callback(new Error('身份证必须为18位'))\r\n  } else{\r\n      const reg =  /(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/\r\n      if (reg.test(value)) {\r\n          callback()\r\n        } else {\r\n          return callback(new Error('身份证号不符合规则'))\r\n        }\r\n    }\r\n}\r\nvar validEmail = (rule, value, callback) => {\r\n  const reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/\r\n  if (reg.test(value) || value.length == 0) {\r\n      callback()\r\n    } else {\r\n      return callback(new Error('邮箱地址不符合规则'))\r\n    }\r\n}\r\n\r\nexport default {\r\n\r\n  name: 'AdminControl',\r\n\r\n  data(){\r\n    return {\r\n      userData: {\r\n        number: null,\r\n        role:'student',\r\n        name:'',\r\n        id:'',\r\n        phone:'',\r\n        email:'',\r\n        stu_id:null,\r\n        teach_id:null,\r\n        password:'123456'\r\n      },\r\n      rules: {\r\n        role: [{required: true, message: '请选择身份', trigger: 'change'}],\r\n        stu_id: [{required: true, message: '学号不能为空', trigger: 'blur'},\r\n                 {pattern: /^\\d{6,6}$/, message: '学号为6位数字', trigger: 'blur'},\r\n                 {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '学号必须为注册年份后两位开头的数字(小于22)'}],\r\n        teach_id: [{required: true, message: '工号不能为空', trigger: 'blur'},\r\n                 {pattern: /^\\d{8,8}$/, message: '工号为8位数字', trigger: 'blur'},\r\n                 {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '工号必须为注册年份后两位开头的数字(小于22)'}],\r\n        name: [{required: true, message: '姓名不能为空', trigger: 'blur'},\r\n               {validator: validName, trigger: ['blur', 'change']}],\r\n        id: [{ required: true, message: '身份证不能为空', trigger: 'blur'},\r\n                   { validator: validPassport, trigger: 'blur' }],\r\n        phone: [{required: false, trigger: ['blur', 'change']},\r\n                {validator: validPhone, trigger: 'blur'}],\r\n        email: [{required: false, trigger: 'blur'},\r\n                {validator: validEmail, trigger: 'blur'}],\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    submit(){\r\n      // axios.post('http://localhost:8081/info/save', {id:2, role: \"student\", name:\"yyy\", phone:\"\", email:\"\",passport: \"310222222221333211\", password: \"123\"}).then(function(resp){\r\n      //   if(resp.data == 'Success'){\r\n      //     alert('提交成功')\r\n      //   }\r\n      // })\r\n      this.$refs['userData'].validate(valid => {\r\n        if(valid){\r\n          if(this.userData.role == 'student')\r\n            this.userData.number = this.userData.stu_id\r\n          if(this.userData.role == 'teacher')\r\n            this.userData.number = this.userData.teach_id\r\n          // this.info.passport = this.userData.passport\r\n          // this.info.role = this.userData.role\r\n          // this.info.phone = this.userData.phone\r\n          // this.info.email = this.userData.email\r\n          // this.info.name = this.userData.name\r\n          // alert(\"提交成功\")\r\n          console.log(this.userData)\r\n          axios.post('http://localhost:8081/register', null, {params:this.userData}).then(function(resp){\r\n            console.log(resp);\r\n            alert('提交成功')\r\n              \r\n          }).catch(error => {\r\n            if(error.response.status == 420){\r\n              alert('学号已存在');\r\n            }\r\n            this.userData.id = ''\r\n            console.dir(error);\r\n          })\r\n        }\r\n        else{\r\n          console.log('error ssssubmit');\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n#container {\r\n  border-radius: 15px;\r\n  /* background-clip: padding-box; */\r\n  margin: 0px auto;\r\n  width: 500px;\r\n  padding: 35px 35px;\r\n  background: #fff;\r\n  /* border: 1px solid #eaeaea; */\r\n  /* box-shadow: 0 0 25px #cac6c6; */\r\n}\r\n\r\nh3 {\r\n  margin: 40px 0 0;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  display: inline-block;\r\n  margin: 0 10px;\r\n}\r\na {\r\n  color: #42b983;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}