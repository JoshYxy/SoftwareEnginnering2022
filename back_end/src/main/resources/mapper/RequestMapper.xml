<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jwsystem.dao.RequestDao">
    <update id="examinedById">
        UPDATE requestDTO
        SET examined = #{examined}, passed = #{passed}
        WHERE request_id = #{request_id}
    </update>
    <delete id="deleteReqByRequestId">
        DELETE FROM requestDTO WHERE request_id = #{request_id}
    </delete>
    <!-- 得到所有未被审核的申请 -->
<<<<<<< Updated upstream
    <select id="getAllRequests" resultType="com.jwsystem.entity.request.Request">
=======
    <select id="getAllRequests" resultType="com.jwsystem.dto.RequestDTO">
>>>>>>> Stashed changes
        SELECT *
        FROM requestDTO where examined = false
    </select>
    <!--得到某条申请 -->
<<<<<<< Updated upstream
    <select id="selectRequestById" resultType="com.jwsystem.entity.request.Request">
=======
    <select id="selectRequestById" resultType="com.jwsystem.dto.RequestDTO">
>>>>>>> Stashed changes
        SELECT *
        FROM requestDTO where request_id = #{request_id}
    </select>
    <!--插入申请并返回request_id-->
<<<<<<< Updated upstream
    <insert id="insertRequest" parameterType="com.jwsystem.entity.request.Request" useGeneratedKeys="true" keyProperty="requestId">
=======
    <insert id="insertRequest" parameterType="com.jwsystem.dto.RequestDTO" useGeneratedKeys="true" keyProperty="requestId">
>>>>>>> Stashed changes
<!--        <selectKey keyProperty="request_id" order="AFTER" resultType="java.lang.Integer">-->
<!--            select last_insert_id()-->
<!--        </selectKey>-->
        insert into requestDTO(request_id,type,course_id,teacher_num,building,room_num,examined,passed)
        values (#{requestId},#{type},#{courseId},#{teacherNum},#{building},#{roomNum},#{examined},#{passed})
    </insert>
</mapper>