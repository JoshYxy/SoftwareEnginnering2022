{"ast":null,"code":"import axios from 'axios';\nimport UserinfoMaintenance from './UserinfoMaintenance.vue';\nexport default {\n  name: 'UserInfo',\n  components: {\n    UserinfoMaintenance\n  },\n\n  data() {\n    return {\n      collegeData: [{\n        id: 1,\n        name: '计算机科学技术学院',\n        major: [{\n          id: 1,\n          name: '大数据'\n        }, {\n          id: 2,\n          name: '信息安全'\n        }]\n      }, {\n        id: 2,\n        name: '生命科学学院',\n        major: [{\n          id: 1,\n          name: '生物'\n        }, {\n          id: 2,\n          name: '123'\n        }]\n      }, {\n        id: 3,\n        name: '软件工程学院',\n        major: [{\n          id: 1,\n          name: '软件工程'\n        }]\n      }],\n      userData: [// {\n        // number: 1,\n        // name: 'undefined',\n        // role: 'student',\n        // phone: '13332221111',\n        // email: '123@qq.com',\n        // id: '311222322222111111',\n        // status: 'studying',\n        // college: '计算机科学技术学院', \n        // college_:{},\n        // major: '大数据',\n        // password: '123455'\n        // },\n        // {\n        // number: 2,\n        // name: 'un1ed',\n        // role: 'teacher',\n        // phone: '13332221111',\n        // email: '123@qq.com',\n        // id: '31122232222221',\n        // status: 'working',\n        // major: '信息安全',\n        // college: '计算机科学技术学院', \n        // college_:{},\n        // password: '123455'\n        // }\n      ]\n    };\n  },\n\n  // watch: {\n  //   userData: {\n  //     //axios post\n  //   }\n  // },\n  methods: {\n    updateUser(index, e) {\n      // console.log(e);\n      this.userData[index].name = e.name;\n      this.userData[index].id = e.id;\n      this.userData[index].phone = e.phone;\n      this.userData[index].major = e.major;\n      this.userData[index].email = e.email;\n      this.userData[index].password = e.password;\n      this.userData[index].college = e.college;\n    },\n\n    updataStatus(index) {\n      axios.post('http://localhost:8081/admin/user/info', this.userData[index]).catch(error => {\n        console.dir(error);\n      });\n    }\n\n  },\n\n  async created() {\n    //获取用户信息\n    await axios.get('http://localhost:8081/admin/users').then(res => {\n      console.log(res);\n      this.userData = res.data.data1;\n    }).catch(error => {\n      alert(\"服务器访问失败\");\n      console.dir(error);\n    }); //获取学院信息\n    // console.log(this.userData)\n\n    await axios.get(\"http://localhost:8081/user/edu\").then(res => {\n      this.collegeData = res.data.data1;\n\n      for (let i in this.collegeData) {\n        //替换变量名,对应后端数据\n        this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOId/g, \"id\"));\n        this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorId/g, \"id\"));\n        this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOName/g, \"name\"));\n        this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorName/g, \"name\"));\n      }\n    }).catch(error => {\n      alert('获取服务器信息失败');\n      console.dir(error);\n    });\n\n    for (let i in this.userData) {\n      for (let j of this.collegeData) {\n        if (j.name == this.userData[i].college) this.userData[i].college_ = j;\n      }\n    }\n\n    console.log(this.userData);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["axios","UserinfoMaintenance","name","components","data","collegeData","id","major","userData","methods","updateUser","index","e","phone","email","password","college","updataStatus","post","catch","error","console","dir","created","get","then","res","log","data1","alert","i","JSON","parse","stringify","replace","j","college_"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\UserInfo.vue"],"sourcesContent":["<template>\r\n  <div class=\"info\">\r\n    <h1 style=\"margin-right:250px\">信息查询</h1>\r\n    <!-- table-layout为fixed时出错 -->\r\n    <el-table class=\"table\" :data=\"userData\" max-height=\"500px\">\r\n      <el-table-column fixed prop=\"number\" label=\"Number\" width=\"120\" />\r\n      <el-table-column prop=\"name\" label=\"Name\" width=\"120\" />\r\n      <el-table-column prop=\"role\" label=\"Role\" width=\"120\" />\r\n      <el-table-column prop=\"phone\" label=\"Phone\" width=\"180\" />\r\n      <el-table-column prop=\"email\" label=\"Email\" width=\"180\" />\r\n      <el-table-column prop=\"id\" label=\"Id\" width=\"180\" />\r\n      <el-table-column prop=\"college\" label=\"College\" width=\"180\" />\r\n      <el-table-column prop=\"major\" label=\"Major\" width=\"150\" />\r\n      <el-table-column prop=\"password\" label=\"Password\" width=\"150\" />\r\n      <el-table-column fixed=\"right\" label=\"Status\" width=\"180\">\r\n      <template #default=\"scope\">\r\n        <el-radio-group v-model=\"scope.row.status\" @change=\"updataStatus(scope.$index)\">\r\n          <el-radio v-if=\"scope.row.role=='student'\" label=\"studying\" >在读</el-radio>\r\n          <el-radio v-if=\"scope.row.role=='student'\" label=\"graduated\" >毕业</el-radio>\r\n          <el-radio v-if=\"scope.row.role=='teacher'\" label=\"working\" >在岗</el-radio>\r\n          <el-radio v-if=\"scope.row.role=='teacher'\" label=\"quit\" >离职</el-radio>\r\n        </el-radio-group>\r\n      </template>\r\n      </el-table-column>\r\n      <el-table-column fixed=\"right\" label=\"Operations\" width=\"180\">\r\n      <template #default=\"scope\">\r\n        <userinfo-maintenance \r\n          @changeInfo=\"updateUser(scope.$index,$event)\" \r\n          :userInfo=\"scope.row\" \r\n          :collegeData=\"this.collegeData\" \r\n          :major_b=\"this.userData[scope.$index].major\" />\r\n        <!-- </userinfo-maintenance> -->\r\n        <!-- <el-switch @change=\"test\" on-value=\"1\" off-value=\"0\" v-model=\"scope.row.role\"> -->\r\n        <!-- 向组件传入用户id -->\r\n      </template>\r\n    </el-table-column>\r\n    </el-table>\r\n\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport UserinfoMaintenance from './UserinfoMaintenance.vue'\r\nexport default {\r\n  name: 'UserInfo',\r\n  components: {\r\n    UserinfoMaintenance\r\n  },\r\n  data() {\r\n      return{\r\n        collegeData: [\r\n            { \r\n            id: 1,\r\n            name: '计算机科学技术学院', \r\n            major: [\r\n                {id: 1, name: '大数据'},\r\n                {id: 2, name: '信息安全'}\r\n            ]\r\n            },\r\n            { \r\n            id: 2,\r\n            name: '生命科学学院', \r\n            major: [\r\n                {id: 1, name: '生物'},\r\n                {id: 2, name: '123'}\r\n            ]\r\n            },\r\n            { \r\n            id: 3,\r\n            name: '软件工程学院', \r\n            major: [\r\n                {id: 1, name: '软件工程'},\r\n            ]\r\n            },\r\n        ],\r\n        userData: [\r\n            // {\r\n            // number: 1,\r\n            // name: 'undefined',\r\n            // role: 'student',\r\n            // phone: '13332221111',\r\n            // email: '123@qq.com',\r\n            // id: '311222322222111111',\r\n            // status: 'studying',\r\n            // college: '计算机科学技术学院', \r\n            // college_:{},\r\n            // major: '大数据',\r\n            // password: '123455'\r\n            // },\r\n            // {\r\n            // number: 2,\r\n            // name: 'un1ed',\r\n            // role: 'teacher',\r\n            // phone: '13332221111',\r\n            // email: '123@qq.com',\r\n            // id: '31122232222221',\r\n            // status: 'working',\r\n            // major: '信息安全',\r\n            // college: '计算机科学技术学院', \r\n            // college_:{},\r\n            // password: '123455'\r\n            // }\r\n        ],\r\n      }\r\n  },\r\n  // watch: {\r\n  //   userData: {\r\n  //     //axios post\r\n  //   }\r\n  // },\r\n  methods: {\r\n    updateUser(index, e){\r\n      // console.log(e);\r\n      this.userData[index].name=e.name;\r\n      this.userData[index].id=e.id;\r\n      this.userData[index].phone=e.phone;\r\n      this.userData[index].major=e.major;\r\n      this.userData[index].email=e.email;\r\n      this.userData[index].password=e.password;\r\n      this.userData[index].college=e.college;      \r\n    },  \r\n    updataStatus(index) {\r\n      axios.post('http://localhost:8081/admin/user/info', this.userData[index])\r\n      .catch(error =>{\r\n        console.dir(error)\r\n      })\r\n    },\r\n  },\r\n\r\n  async created() {\r\n      //获取用户信息\r\n    await axios.get('http://localhost:8081/admin/users')\r\n      .then(res => {\r\n        console.log(res)\r\n        this.userData = res.data.data1\r\n      }).catch(error => {\r\n        alert(\"服务器访问失败\")\r\n        console.dir(error);\r\n      });\r\n      //获取学院信息\r\n    // console.log(this.userData)\r\n    await axios.get(\"http://localhost:8081/user/edu\")\r\n      .then(res => {\r\n\r\n        this.collegeData = res.data.data1\r\n        for(let i in this.collegeData) {//替换变量名,对应后端数据\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOId/g,\"id\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorId/g,\"id\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOName/g,\"name\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorName/g,\"name\"))\r\n          \r\n        }\r\n      }).catch(error => {\r\n        alert('获取服务器信息失败')\r\n        console.dir(error);\r\n      });\r\n    for(let i in this.userData) {\r\n      for(let j of this.collegeData) {\r\n        if(j.name == this.userData[i].college)\r\n          this.userData[i].college_ = j\r\n      }\r\n    }\r\n    console.log(this.userData)\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}