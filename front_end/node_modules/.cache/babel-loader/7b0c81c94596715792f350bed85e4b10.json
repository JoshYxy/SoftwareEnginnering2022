{"ast":null,"code":"// import axios from 'axios'\nexport default {\n  name: 'MajorMaintenance',\n\n  data() {\n    return {\n      id: 100,\n      visible: false,\n      defaultProps: {\n        children: 'major',\n        label: 'name'\n      },\n      collegeData: [{\n        id: 1,\n        name: '计算机科学技术学院',\n        major: [{\n          id: 1,\n          name: '大数据'\n        }, {\n          id: 2,\n          name: '信息安全'\n        }]\n      }, {\n        id: 2,\n        name: '生命科学学院',\n        major: [{\n          id: 1,\n          name: '生物'\n        }, {\n          id: 2,\n          name: '123'\n        }]\n      }, {\n        id: 3,\n        name: '软件工程学院',\n        major: [{\n          id: 1,\n          name: '软件工程'\n        }]\n      }]\n    };\n  },\n\n  methods: {\n    append(data) {\n      const newChild = {\n        id: this.id++,\n        name: '新的专业'\n      };\n\n      if (!data.major) {\n        data.major = [];\n      }\n\n      data.major.push(newChild);\n      console.log(this.collegeData);\n      this.collegeData = [...this.collegeData]; //更新数据，刷新页面\n    },\n\n    alter(data) {\n      console.log(data);\n    },\n\n    remove(node, data) {\n      const parent = node.parent;\n      const children = parent.data.major || parent.data;\n      const index = children.findIndex(d => d.id === data.id);\n      children.splice(index, 1);\n      this.collegeData = [...this.collegeData];\n      console.log(this.collegeData);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwCA;AACA,eAAe;AACbA,MAAI,EAAE,kBADO;;AAEbC,MAAI,GAAG;AACL,WAAO;AACLC,QAAE,EAAE,GADC;AAELC,aAAO,EAAE,KAFJ;AAGLC,kBAAY,EAAE;AACZC,gBAAQ,EAAE,OADE;AAEZC,aAAK,EAAE;AAFK,OAHT;AAOLC,iBAAW,EAAE,CACX;AACEL,UAAE,EAAE,CADN;AAEEF,YAAI,EAAE,WAFR;AAGEQ,aAAK,EAAE,CACH;AAACN,YAAE,EAAE,CAAL;AAAQF,cAAI,EAAE;AAAd,SADG,EAEH;AAACE,YAAE,EAAE,CAAL;AAAQF,cAAI,EAAE;AAAd,SAFG;AAHT,OADW,EASX;AACEE,UAAE,EAAE,CADN;AAEEF,YAAI,EAAE,QAFR;AAGEQ,aAAK,EAAE,CACH;AAACN,YAAE,EAAE,CAAL;AAAQF,cAAI,EAAE;AAAd,SADG,EAEH;AAACE,YAAE,EAAE,CAAL;AAAQF,cAAI,EAAE;AAAd,SAFG;AAHT,OATW,EAiBX;AACEE,UAAE,EAAE,CADN;AAEEF,YAAI,EAAE,QAFR;AAGEQ,aAAK,EAAE,CACH;AAACN,YAAE,EAAE,CAAL;AAAQF,cAAI,EAAE;AAAd,SADG;AAHT,OAjBW;AAPR,KAAP;AAiCD,GApCY;;AAqCbS,SAAO,EAAE;AACPC,UAAM,CAACT,IAAD,EAAO;AACX,YAAMU,QAAO,GAAI;AAAET,UAAE,EAAE,KAAKA,EAAL,EAAN;AAAiBF,YAAI,EAAE;AAAvB,OAAjB;;AACA,UAAI,CAACC,IAAI,CAACO,KAAV,EAAiB;AACfP,YAAI,CAACO,KAAL,GAAa,EAAb;AACF;;AACAP,UAAI,CAACO,KAAL,CAAWI,IAAX,CAAgBD,QAAhB;AACAE,aAAO,CAACC,GAAR,CAAY,KAAKP,WAAjB;AACA,WAAKA,WAAL,GAAmB,CAAC,GAAG,KAAKA,WAAT,CAAnB,CAPW,CAO6B;AACzC,KATM;;AAUPQ,SAAK,CAACd,IAAD,EAAO;AACVY,aAAO,CAACC,GAAR,CAAYb,IAAZ;AACD,KAZM;;AAaPe,UAAM,CAACC,IAAD,EAAOhB,IAAP,EAAa;AAEjB,YAAMiB,MAAK,GAAID,IAAI,CAACC,MAApB;AACA,YAAMb,QAAO,GAAIa,MAAM,CAACjB,IAAP,CAAYO,KAAZ,IAAqBU,MAAM,CAACjB,IAA7C;AACA,YAAMkB,KAAI,GAAId,QAAQ,CAACe,SAAT,CAAoBC,CAAD,IAAOA,CAAC,CAACnB,EAAF,KAASD,IAAI,CAACC,EAAxC,CAAd;AACAG,cAAQ,CAACiB,MAAT,CAAgBH,KAAhB,EAAuB,CAAvB;AACA,WAAKZ,WAAL,GAAmB,CAAC,GAAG,KAAKA,WAAT,CAAnB;AACAM,aAAO,CAACC,GAAR,CAAY,KAAKP,WAAjB;AACF;;AArBO;AArCI,CAAf","names":["name","data","id","visible","defaultProps","children","label","collegeData","major","methods","append","newChild","push","console","log","alter","remove","node","parent","index","findIndex","d","splice"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\MajorMaintenance.vue"],"sourcesContent":["<template>\r\n  <div >\r\n    <el-tree\r\n      :data=\"this.collegeData\"\r\n      node-key=\"id\"\r\n      default-expand-all\r\n      :props=\"this.defaultProps\" \r\n      :expand-on-click-node=\"false\"\r\n      class=\"el-tree-container\"\r\n    >\r\n      <template #default=\"{ node, data }\">\r\n        <span class=\"custom-tree-node\">\r\n          <span>{{ data.name }}</span>\r\n          <span>\r\n            <a v-if=\"data.major\" @click=\"append(data)\"> 新增 </a>\r\n            <el-popover v-model:visible=\"visible\" placement=\"top\" :width=\"160\">\r\n              <p>Are you sure to delete this?</p>\r\n              <div style=\"text-align: right; margin: 0\">\r\n                <el-button size=\"small\" type=\"text\" @click=\"visible = false\"\r\n                  >cancel</el-button\r\n                >\r\n                <el-button size=\"small\" type=\"primary\" @click=\"visible = false\"\r\n                  >confirm</el-button\r\n                >\r\n              </div>\r\n              <template #reference>\r\n                <el-button @click=\"visible = true\">Delete</el-button>\r\n              </template>\r\n            </el-popover>\r\n            <a @click=\"alter(data)\"> 修改 </a>\r\n            <a @click=\"remove(node, data)\"> 删除 </a>\r\n          </span>\r\n        </span>\r\n      </template>\r\n    </el-tree>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n// import axios from 'axios'\r\nexport default {\r\n  name: 'MajorMaintenance',\r\n  data() {\r\n    return { \r\n      id: 100,\r\n      visible: false,\r\n      defaultProps: {\r\n        children: 'major',\r\n        label: 'name',\r\n      },\r\n      collegeData: [\r\n        { \r\n          id: 1,\r\n          name: '计算机科学技术学院', \r\n          major: [\r\n              {id: 1, name: '大数据'},\r\n              {id: 2, name: '信息安全'}\r\n          ]\r\n        },\r\n        { \r\n          id: 2,\r\n          name: '生命科学学院', \r\n          major: [\r\n              {id: 1, name: '生物'},\r\n              {id: 2, name: '123'}\r\n          ]\r\n        },\r\n        { \r\n          id: 3,\r\n          name: '软件工程学院', \r\n          major: [\r\n              {id: 1, name: '软件工程'},\r\n          ]\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    append(data) {\r\n      const newChild = { id: this.id++, name: '新的专业'}\r\n      if (!data.major) {\r\n        data.major = []\r\n      }\r\n      data.major.push(newChild)\r\n      console.log(this.collegeData)\r\n      this.collegeData = [...this.collegeData]//更新数据，刷新页面\r\n    },\r\n    alter(data) {\r\n      console.log(data)\r\n    },\r\n    remove(node, data) {\r\n\r\n      const parent = node.parent\r\n      const children = parent.data.major || parent.data\r\n      const index = children.findIndex((d) => d.id === data.id)\r\n      children.splice(index, 1)\r\n      this.collegeData = [...this.collegeData]\r\n      console.log(this.collegeData)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.el-tree-container{\r\n  width:500px;\r\n  margin-left: 150px;\r\n}\r\n.el-tree-node__expand-icon{\r\n  width:300px;\r\n  max-height: 12px;\r\n  margin-right:-140px;\r\n  transform: none !important;\r\n}\r\n.el-tree-node__expand-icon .expanded{\r\n  width:300px;\r\n  max-height: 12px;\r\n  transform: rotate(90deg);\r\n  margin-right:-150px;\r\n  position: relative;\r\n  transform: none !important;\r\n}\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 14px;\r\n  padding-right: 8px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}