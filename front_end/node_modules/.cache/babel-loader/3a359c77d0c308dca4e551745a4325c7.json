{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n// eslint-disable-next-line\nimport axios from 'axios';\nexport default {\n  name: 'ResetPassword',\n\n  data() {\n    var validPassword = (rule, value, callback) => {\n      const reg = /^(?![0-9]+$)(?![a-zA-Z]+$)(?![-_()]+$)[0-9A-Za-z-_()]{6,32}$/;\n\n      if (value !== '') {\n        if (reg.test(value)) {\n          if (this.passwordForm.password2 !== '') {\n            this.$refs['passwordForm'].validateField('password2', () => null);\n          }\n\n          callback();\n        } else {\n          return callback(new Error('字母，数字或者特殊字符(-_)至少包含两种'));\n        }\n      }\n    };\n\n    var validPassword2 = (rule, value, callback) => {\n      if (value === this.passwordForm.password) {\n        callback();\n      } else {\n        return callback(new Error('两次密码不一致'));\n      }\n    };\n\n    return {\n      passwordForm: {\n        password: '',\n        password2: ''\n      },\n      passwordForm2: {\n        password: ''\n      },\n      rules: {\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 32,\n          message: '长度为6-32个字符',\n          trigger: ['blur', 'change']\n        }, {\n          validator: validPassword,\n          trigger: ['blur', 'change']\n        }],\n        password2: [{\n          required: true,\n          message: '请输入确认密码',\n          trigger: 'blur'\n        }, {\n          validator: validPassword2,\n          trigger: ['blur', 'change']\n        }]\n      }\n    };\n  },\n\n  methods: {\n    submitt() {\n      this.$refs['passwordForm'].validate(valid => {\n        if (valid) {\n          this.passwordForm2.password = this.passwordForm.password; // axios.post('http://localhost:8081/reset', null, {params:this.passwordForm2})\n\n          axios.post('http://localhost:8081/user/password', this.passwordForm2).then(res => {\n            console.log(res);\n            alert(\"重置成功\");\n            console.log(this.passwordForm);\n            this.passwordForm.password = '';\n            this.passwordForm.password2 = '';\n            this.$router.push('/home/welcome');\n          }).catch(error => {\n            alert('重置失败');\n            console.dir(error);\n          });\n        } else {\n          console.log('error submit');\n          return false;\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","validPassword","rule","value","callback","reg","test","passwordForm","password2","$refs","validateField","Error","validPassword2","password","passwordForm2","rules","required","message","trigger","min","max","validator","methods","submitt","validate","valid","post","then","res","console","log","alert","$router","push","catch","error","dir"],"sourceRoot":"","sources":["D:\\desktop\\5-Lab\\front_end\\src\\views\\ResetPassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"password\">\r\n    <el-form class='reset-container' ref=\"passwordForm\" :model=\"passwordForm\" :rules=\"rules\" autocomplete=\"on\" label-position=\"left\">\r\n      <h2 class='reset-title'>重置密码</h2>\r\n      <el-form-item prop=\"password\">\r\n        <el-input\r\n          name=\"password\"\r\n          v-model=\"passwordForm.password\"\r\n          placeholder=\"密码\"\r\n          type=\"text\"\r\n          maxlength=\"40\"\r\n        />\r\n      </el-form-item> \r\n      <el-form-item prop=\"password2\">\r\n        <el-input\r\n          name=\"password2\"\r\n          v-model=\"passwordForm.password2\"\r\n          placeholder=\"确认密码\"\r\n          type=\"password\"\r\n          maxlength=\"40\"\r\n          @keydown.enter=\"submitt\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitt\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// eslint-disable-next-line\r\nimport axios from 'axios'\r\n\r\n\r\nexport default {\r\n  name: 'ResetPassword',\r\n\r\n  data(){\r\n    var validPassword = (rule, value, callback) => {\r\n      const reg = /^(?![0-9]+$)(?![a-zA-Z]+$)(?![-_()]+$)[0-9A-Za-z-_()]{6,32}$/\r\n      if(value!==''){\r\n          if (reg.test(value)) {\r\n            if(this.passwordForm.password2!==''){\r\n              this.$refs['passwordForm'].validateField('password2', () => null)\r\n            } \r\n            callback()\r\n          } else {\r\n          return callback(new Error('字母，数字或者特殊字符(-_)至少包含两种'))\r\n          }\r\n      }\r\n    }\r\n    var validPassword2 = (rule, value, callback) => {\r\n        if (value === this.passwordForm.password) {\r\n            callback()\r\n        } else {\r\n            return callback(new Error('两次密码不一致'))\r\n        }\r\n    };\r\n    return {\r\n      passwordForm: {\r\n        password: '',\r\n        password2: ''\r\n      },\r\n      passwordForm2: {\r\n        password: ''\r\n      },\r\n      rules: {\r\n        password:  [{required: true, message: '请输入密码', trigger: 'blur'},\r\n                    {min: 6, max: 32, message: '长度为6-32个字符', trigger: ['blur', 'change']},\r\n                    {validator: validPassword, trigger: ['blur', 'change']}],\r\n        password2: [{required: true, message: '请输入确认密码', trigger: 'blur'},\r\n                    {validator: validPassword2, trigger: ['blur', 'change']}]\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    submitt(){\r\n      this.$refs['passwordForm'].validate(valid => {\r\n        if(valid){\r\n          this.passwordForm2.password = this.passwordForm.password\r\n          // axios.post('http://localhost:8081/reset', null, {params:this.passwordForm2})\r\n          axios.post('http://localhost:8081/user/password', this.passwordForm2)\r\n          .then(res => {\r\n            console.log(res);\r\n            alert(\"重置成功\")\r\n            console.log(this.passwordForm)\r\n            this.passwordForm.password=''\r\n            this.passwordForm.password2=''\r\n            this.$router.push('/home/welcome')\r\n          }).catch(error => {\r\n            alert('重置失败');\r\n            console.dir(error);\r\n          });\r\n        }\r\n        else{\r\n          console.log('error submit');\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\nh3 {\r\n  margin: 40px 0 0;\r\n}\r\n\r\n.reset-container {\r\n  border-radius: 15px;\r\n  background-clip: padding-box;\r\n  margin: 90px auto;\r\n  width: 350px;\r\n  padding: 35px 35px 15px 35px;\r\n  background-color: transparent;\r\n  border: 1px solid transparent;\r\n  box-shadow: 0 0 25px transparent;\r\n}\r\n\r\n.reset-title {\r\n  margin: 0px auto 40px auto;\r\n  text-align: center;\r\n  color: #505458;\r\n}\r\n\r\n.password {\r\n  width: 100%;\r\n  height: 530px;\r\n  background: url(\"../assets/1.jpg\") no-repeat;\r\n  background-size: cover;\r\n  overflow: hidden;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}