{"ast":null,"code":"import { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  data() {\n    return {\n      // courses: [\n      //     {id:1, name:'第1节课'},\n      //     {id:2, name:'第2节课'},\n      //     {id:3, name:'第3节课'},\n      // ],\n      onDelete: [false],\n      //是否进入删除教室状态\n      checkGroup: [],\n      startTime: ['08:00'],\n      endTime: ['08:40'],\n      newRoom: '',\n      //存放input输入的教室号\n      newClassroom: {\n        name: '',\n        aka: '',\n        room: []\n      },\n      //存档select选择的教学楼\n      classroom: [{\n        name: '第三教学楼',\n        aka: 'H3',\n        room: ['301', '402']\n      }, {\n        name: '光华楼西辅楼',\n        aka: 'HGX',\n        room: ['201', '502']\n      }],\n      //存放所有的教学楼及教室号信息\n      buildings: [{\n        name: '第三教学楼',\n        aka: 'H3'\n      }, {\n        name: '第四教学楼',\n        aka: 'H4'\n      }, {\n        name: '光华楼西辅楼',\n        aka: 'HGX'\n      }, {\n        name: '第五教学楼',\n        aka: 'H5'\n      }, {\n        name: '第六教学楼',\n        aka: 'H6'\n      }]\n    };\n  },\n\n  methods: {\n    deleteCourse(index) {\n      // this.courses.splice(index,1)\n      this.startTime.splice(index, 1);\n      this.endTime.splice(index, 1);\n    },\n\n    addCourse(index) {\n      // this.courses.splice(index+1,0,{id:100, name:'dis'})\n      this.startTime.splice(index + 1, 0, '');\n      this.endTime.splice(index + 1, 0, ''); // this.courses.push({\n      //     id:this.courses.length+1,\n      //     name:'第'+(this.courses.length+1)+'节课'\n      // })\n      // console.log(this.courses)\n    },\n\n    addClassroom() {\n      //axios\n      if (this.newRoom === '') {\n        alert('教室号不能为空');\n        return;\n      }\n\n      var i;\n      i = this.classroom.findIndex(building => building.name == this.newClassroom.name); //寻找classroom已有的教学楼中是否有newClassroom中的教学楼 \n\n      if (i >= 0) {\n        if (this.classroom[i].room.indexOf(this.newRoom) > -1) {\n          alert('教室已存在，请勿重复添加');\n          this.newRoom = '';\n          return;\n        }\n\n        this.classroom[i].room.push(this.newRoom);\n        this.classroom[i].room.sort((a, b) => {\n          if (a.length < b.length) return -1;else if (a.length > b.length) return 1;else return a.localeCompare(b);\n        }); //将教室号排序\n      } else {\n        this.newClassroom.room = [];\n        this.newClassroom.room.push(this.newRoom);\n        this.classroom.push(this.newClassroom);\n      }\n\n      this.newRoom = '';\n    },\n\n    checkDelete(index) {\n      ElMessageBox.confirm('是否删除教学楼：' + this.classroom[index].name, 'Warning', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteBuilding(index);\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        });\n      }).catch(() => {\n        ElMessage({\n          type: 'info',\n          message: '删除取消'\n        });\n      });\n    },\n\n    deleteBuilding(index) {\n      //axios\n      this.classroom.splice(index, 1);\n    },\n\n    openDelete(index) {\n      this.onDelete[index] = true;\n\n      for (let i in this.classroom[index].room) {\n        this.checkGroup.push({\n          name: this.classroom[index].room[i],\n          status: false\n        });\n      }\n\n      console.log(this.checkGroup);\n    },\n\n    submitDelete(index) {\n      for (let i = 0; i < this.checkGroup.length; i++) {\n        if (this.checkGroup[i].status) {\n          this.classroom[index].room.splice(i, 1);\n          this.checkGroup.splice(i, 1);\n          i = i - 1;\n        }\n      } //axios\n\n    },\n\n    test(index) {\n      // console.log(this.startTime)\n      console.log(index);\n      console.log(this.newClassroom);\n      console.log(this.classroom);\n    },\n\n    submit() {//axios\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ElMessage","ElMessageBox","data","onDelete","checkGroup","startTime","endTime","newRoom","newClassroom","name","aka","room","classroom","buildings","methods","deleteCourse","index","splice","addCourse","addClassroom","alert","i","findIndex","building","indexOf","push","sort","a","b","length","localeCompare","checkDelete","confirm","confirmButtonText","cancelButtonText","type","then","deleteBuilding","message","catch","openDelete","status","console","log","submitDelete","test","submit"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\course\\EduMaintenance.vue"],"sourcesContent":["<template>\r\n    <div >\r\n        <h2>教学时间设置</h2>\r\n        <el-button @click=\"addCourse(-1)\">增加第一节课</el-button>\r\n        <el-button type='primary' @click=\"submit\">提交修改</el-button>\r\n        <div class=\"course-container\" v-for=\"(item, index) in startTime\" :key=\"item.id\">\r\n            <span class=\"course-left\">第{{index+1}}节课</span>\r\n            <div class=\"course-right\">\r\n                <el-time-select\r\n                    v-model=\"startTime[index]\"\r\n                    :min-time=\"index==0?'7:55':(endTime[index-1]?endTime[index-1]:'8:00')\"\r\n                    :max-time=\"endTime[index]\"\r\n                    :start=\"index==0?'8:00':(endTime[index-1]?endTime[index-1]:'8:00')\"\r\n                    placeholder=\"上课时间\"\r\n                    step=\"00:05\"\r\n                    end=\"22:30\"\r\n                    />-\r\n                <el-time-select\r\n                    v-model=\"endTime[index]\"\r\n                    :min-time=\"startTime[index]\"\r\n                    :max-time=\"startTime[index+1]\"\r\n                    :start=\"startTime[index]?startTime[index]:'8:00'\"\r\n                    placeholder=\"下课时间\"\r\n                    step=\"00:05\"\r\n                    end=\"23:30\"\r\n                    />\r\n                <el-button @click=\"addCourse(index)\">增加一节课</el-button>\r\n                <el-button @click=\"deleteCourse(index)\">删除这节课</el-button>\r\n                <el-button @click=\"test(index)\">test</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"class-container\">\r\n            <h2>上课教室设置</h2>\r\n            <el-input\r\n                v-model=\"newRoom\"\r\n                placeholder=\"教室号\"\r\n                class=\"input-with-select\"\r\n                \r\n                >\r\n                <template #prepend>\r\n                    <el-select v-model=\"newClassroom\" placeholder=\"教学楼\" value-key=\"name\" style=\"width: 150px\">\r\n                        <el-option v-for=\"(building) in buildings\" :key=\"building.name\" :value=\"building\" :label=\"building.name\"  />\r\n                    </el-select>\r\n                </template>\r\n                <template #append>\r\n                    <section style=\"width: 150px\"> {{newClassroom.aka}}{{newRoom}} </section>\r\n                    \r\n                </template>\r\n            </el-input>\r\n            <el-button @keydown=\"addClassroom\" @click=\"addClassroom\">添加新教室</el-button>\r\n        </div>\r\n        <div class=\"classroom-container\">\r\n            <el-card \r\n                class=\"box-card\"\r\n                v-for=\"(building, index) in classroom\"\r\n                :key=\"building.name\"\r\n                >\r\n                <template #header>\r\n                <div class=\"card-header\">\r\n                    <span>{{building.name}}</span>\r\n                    <el-button class=\"button\" type=\"text\" @click=\"checkDelete(index)\">删除该教学楼</el-button>\r\n                </div>\r\n                </template>\r\n                <el-scrollbar height=\"200px\" class=\"card-item-container\"> \r\n                    <el-button class=\"button\" type=\"text\" @click=\"openDelete(index)\">删除教室</el-button>\r\n                    <div v-for=\"room in building.room\" :key=\"room\" class=\"card-item\">\r\n                        <span v-if=\"!onDelete[index]\">{{building.aka}}{{room}}</span>\r\n                    </div> \r\n                    <div v-for=\"(room,index2) in checkGroup\" \r\n                            :key=\"room.name\" \r\n                            class=\"card-item\" >\r\n                        <el-checkbox \r\n                            v-if=\"onDelete[index]\"\r\n                            v-model=\"checkGroup[index2].status\" \r\n                            :label='checkGroup[index2].name' \r\n                            />\r\n                    </div>\r\n                </el-scrollbar>\r\n\r\n            </el-card>\r\n            <el-checkbox \r\n                v-for=\"(room,index) in checkGroup\" \r\n                :key=\"room.name\" \r\n                v-model=\"checkGroup[index].status\" \r\n                :label='checkGroup[index].name' />\r\n            <el-button class=\"button\" type=\"text\" @click=\"submitDelete(0)\">确认删除选中教室</el-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nexport default {\r\n    data() {\r\n        return {\r\n            // courses: [\r\n            //     {id:1, name:'第1节课'},\r\n            //     {id:2, name:'第2节课'},\r\n            //     {id:3, name:'第3节课'},\r\n\r\n            // ],\r\n            onDelete: [false],//是否进入删除教室状态\r\n            checkGroup: [],\r\n            startTime:['08:00'],\r\n            endTime:['08:40'],\r\n            newRoom:'',//存放input输入的教室号\r\n            newClassroom: {\r\n                name: '',\r\n                aka: '',\r\n                room: [],\r\n            },//存档select选择的教学楼\r\n            classroom: [\r\n                {\r\n                    name: '第三教学楼',\r\n                    aka: 'H3',\r\n                    room: [\r\n                        '301','402'\r\n                    ]\r\n                },\r\n                {\r\n                    name: '光华楼西辅楼',\r\n                    aka: 'HGX',\r\n                    room: [\r\n                        '201','502'\r\n                    ]\r\n                },\r\n            ],//存放所有的教学楼及教室号信息\r\n            buildings: [\r\n                {name: '第三教学楼', aka: 'H3'},\r\n                {name: '第四教学楼', aka: 'H4'},\r\n                {name: '光华楼西辅楼', aka: 'HGX'},\r\n                {name: '第五教学楼', aka: 'H5'},\r\n                {name: '第六教学楼', aka: 'H6'},\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        deleteCourse(index) {\r\n            // this.courses.splice(index,1)\r\n            this.startTime.splice(index,1)\r\n            this.endTime.splice(index,1)\r\n        },\r\n        addCourse(index) {\r\n            // this.courses.splice(index+1,0,{id:100, name:'dis'})\r\n            this.startTime.splice(index+1,0,'')\r\n            this.endTime.splice(index+1,0,'')\r\n            // this.courses.push({\r\n            //     id:this.courses.length+1,\r\n            //     name:'第'+(this.courses.length+1)+'节课'\r\n            // })\r\n            // console.log(this.courses)\r\n        },\r\n\r\n        addClassroom() {\r\n            //axios\r\n            if(this.newRoom === '') {\r\n                alert('教室号不能为空')\r\n                return\r\n            }\r\n            var i;\r\n            i = this.classroom.findIndex((building) => building.name == this.newClassroom.name)//寻找classroom已有的教学楼中是否有newClassroom中的教学楼 \r\n            if(i >= 0) {\r\n                if(this.classroom[i].room.indexOf(this.newRoom) > -1) {\r\n                    alert('教室已存在，请勿重复添加')\r\n                    this.newRoom = ''\r\n                    return\r\n                }\r\n               \r\n                this.classroom[i].room.push(this.newRoom) \r\n                this.classroom[i].room.sort((a, b) => {\r\n                    if(a.length < b.length) return -1\r\n                    else if(a.length > b.length) return 1\r\n                    else return a.localeCompare(b)   \r\n                }) //将教室号排序\r\n            } \r\n            else {\r\n                this.newClassroom.room=[]\r\n                this.newClassroom.room.push(this.newRoom)\r\n                this.classroom.push(this.newClassroom)\r\n            }\r\n            this.newRoom = ''\r\n        },\r\n        checkDelete(index) {\r\n            ElMessageBox.confirm(\r\n                '是否删除教学楼：' + this.classroom[index].name,\r\n                'Warning',\r\n                {\r\n                    confirmButtonText: '确认',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning',\r\n                }\r\n            )\r\n            .then(() => {\r\n                this.deleteBuilding(index)\r\n                ElMessage({\r\n                    type: 'success',\r\n                    message: '删除成功',\r\n                })\r\n                })\r\n            .catch(() => {\r\n                ElMessage({\r\n                    type: 'info',\r\n                    message: '删除取消',\r\n                })\r\n            })\r\n        },\r\n        deleteBuilding(index) {\r\n        //axios\r\n            this.classroom.splice(index, 1)\r\n        },\r\n        openDelete(index) {\r\n            this.onDelete[index] = true\r\n            for(let i in this.classroom[index].room) {\r\n                this.checkGroup.push({name:this.classroom[index].room[i], status: false})\r\n            }\r\n            console.log(this.checkGroup)\r\n            \r\n        },\r\n        submitDelete(index) {\r\n            for(let i = 0; i < this.checkGroup.length; i++) {\r\n                if(this.checkGroup[i].status) {\r\n                    this.classroom[index].room.splice(i, 1)\r\n                    this.checkGroup.splice(i, 1)\r\n                    i=i-1\r\n                }\r\n            }\r\n            //axios\r\n        },\r\n        test(index) {\r\n            // console.log(this.startTime)\r\n            console.log(index)\r\n            console.log(this.newClassroom)\r\n            console.log(this.classroom)\r\n        },\r\n        submit() {\r\n            //axios\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style >\r\n.el-card__body {\r\n    padding-top: 10px;\r\n}\r\n.card-item-container .el-scrollbar__view {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content:space-between;\r\n\r\n}\r\n.card-item-container .button{\r\n    width: 100%;\r\n}\r\n.card-item {\r\n    \r\n    width: 50%;\r\n}\r\n.classroom-container {\r\n    width: 1200px;\r\n    margin: auto;\r\n    display: flex;\r\n    flex-wrap:wrap;\r\n    justify-content:flex-start;\r\n}\r\n.card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.text {\r\n    font-size: 14px;\r\n}\r\n.box-card {\r\n    margin: 0.9%;\r\n    height: 300px;\r\n\r\n    width: 23%;\r\n}\r\n\r\n.course-container {\r\n    display: flex;\r\n    margin: auto;\r\n    justify-content:center\r\n}\r\n.course-left{\r\n    flex: 0;\r\n    margin-left:200px;\r\n    min-width: 100px;\r\n    padding-right:auto;\r\n    /* padding-bottom:20px; */\r\n    padding-left: auto;\r\n    margin:10px;\r\n    text-align:right;\r\n}\r\n.course-right{\r\n    max-width:800px;\r\n    flex: 1;\r\n}\r\n.class-container {\r\n    width: 600px;\r\n    margin: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}