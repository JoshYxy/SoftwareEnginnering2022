{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createElementVNode as _createElementVNode } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"编辑\");\n\nconst _hoisted_2 = {\n  class: \"dialog-footer\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"Cancel\");\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Confirm\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_button, {\n    type: \"text\",\n    onClick: _cache[0] || (_cache[0] = $event => $data.dialogFormVisible = true)\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1\n    /* STABLE */\n\n  }), _createVNode(_component_el_dialog, {\n    modelValue: $data.dialogFormVisible,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.dialogFormVisible = $event),\n    title: \"信息修改\",\n    \"append-to-body\": true\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"span\", _hoisted_2, [_createVNode(_component_el_button, {\n      onClick: _cache[7] || (_cache[7] = $event => $data.dialogFormVisible = false)\n    }, {\n      default: _withCtx(() => [_hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.submit\n    }, {\n      default: _withCtx(() => [_hoisted_4]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"onClick\"])])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      id: \"admin_modify\",\n      ref: \"userData\",\n      model: $data.userData,\n      rules: $data.rules,\n      autocomplete: \"on\",\n      \"text-align:\": \"\",\n      center: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        prop: \"college\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.userData.college,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userData.college = $event),\n          \"value-key\": \"name\",\n          placeholder: \"学院\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.collegeData, colleges => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: colleges.id,\n              value: colleges,\n              label: colleges.name\n            }, null, 8\n            /* PROPS */\n            , [\"value\", \"label\"]);\n          }), 128\n          /* KEYED_FRAGMENT */\n          ))]),\n          _: 1\n          /* STABLE */\n\n        }, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"major\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.userData.major,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userData.major = $event),\n          placeholder: \"专业\"\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.userData.college.major, major => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: major.id,\n              value: major.name,\n              label: major.name\n            }, null, 8\n            /* PROPS */\n            , [\"value\", \"label\"]);\n          }), 128\n          /* KEYED_FRAGMENT */\n          ))]),\n          _: 1\n          /* STABLE */\n\n        }, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"name\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"text\",\n          name: \"name\",\n          modelValue: $data.userData.name,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.userData.name = $event),\n          placeholder: \"姓名\"\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"id\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          name: \"id\",\n          modelValue: $data.userData.id,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.userData.id = $event),\n          placeholder: \"身份证号\",\n          type: \"text\"\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"phone\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"text\",\n          name: \"phone\",\n          modelValue: $data.userData.phone,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.userData.phone = $event),\n          placeholder: \"手机号\"\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_form_item, {\n        prop: \"email\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"text\",\n          name: \"email\",\n          modelValue: $data.userData.email,\n          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.userData.email = $event),\n          placeholder: \"邮箱\"\n        }, null, 8\n        /* PROPS */\n        , [\"modelValue\"])]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"model\", \"rules\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"modelValue\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementBlock","_createVNode","_component_el_button","type","onClick","$data","_component_el_dialog","$event","title","footer","_createElementVNode","$options","_component_el_form","id","ref","model","rules","autocomplete","center","_component_el_form_item","prop","_component_el_select","college","placeholder","_Fragment","_renderList","$props","colleges","_createBlock","_component_el_option","key","value","label","name","major","_component_el_input","phone","email"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\UserinfoMaintenance.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-button type=\"text\" @click=\"dialogFormVisible = true\"\r\n        >编辑</el-button\r\n    >\r\n\r\n    <el-dialog v-model=\"dialogFormVisible\" title=\"信息修改\" :append-to-body=\"true\">\r\n      \r\n        <el-form id=\"admin_modify\" ref=\"userData\" :model=\"userData\" :rules=\"rules\" autocomplete=\"on\"  text-align: center>\r\n          \r\n            <el-form-item prop=\"college\">\r\n                <el-select v-model=\"userData.college\" value-key=\"name\" placeholder=\"学院\">\r\n                <el-option :key=\"colleges.id\" :value=\"colleges\" :label=\"colleges.name\" v-for=\"colleges in collegeData\" ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item prop=\"major\" >\r\n                <el-select v-model=\"userData.major\" placeholder=\"专业\">\r\n                <el-option :key=\"major.id\" :value=\"major.name\" :label=\"major.name\" v-for=\"major in userData.college.major\" ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            \r\n            <el-form-item prop=\"name\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                v-model=\"userData.name\"\r\n                placeholder=\"姓名\"\r\n                />\r\n            </el-form-item> \r\n\r\n            <el-form-item prop=\"id\">\r\n                <el-input\r\n                name=\"id\"\r\n                v-model=\"userData.id\"\r\n                placeholder=\"身份证号\"\r\n                type=\"text\"\r\n                />\r\n            </el-form-item>\r\n\r\n            <el-form-item prop=\"phone\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"phone\"\r\n                v-model=\"userData.phone\"\r\n                placeholder=\"手机号\"\r\n                />\r\n            </el-form-item> \r\n\r\n            <el-form-item prop=\"email\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"email\"\r\n                v-model=\"userData.email\"\r\n                placeholder=\"邮箱\"\r\n                />\r\n            </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n        <span class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible = false\">Cancel</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\"\r\n            >Confirm</el-button\r\n            >\r\n        </span>\r\n        </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n// import axios from 'axios'\r\n\r\nimport {validName,validPhone,validPassport,validEmail} from './jsComponents/CheckRules'//格式检查\r\nexport default {\r\n  name: 'MajorMaintenance',\r\n  props: {\r\n      userData_: Object,\r\n      collegeData: Object\r\n  },\r\n  data() {\r\n    return {\r\n\r\n        dialogFormVisible: false,\r\n        formLabelWidth: '140px',\r\n//与录入信息处相同\r\n        \r\n        userData: {\r\n        number: null,\r\n        role: '',\r\n        name: '',\r\n        id: '',\r\n        phone: '',\r\n        email: '',\r\n        stu_id: null,\r\n        teach_id: null,\r\n        password: '123456',\r\n        major: '',\r\n        college: {},\r\n        },\r\n        rules: {\r\n            college: [{required: true, message: '请选择学院', trigger: 'change'}],\r\n            major: [{required: true, message: '请选择专业', trigger: 'change'}],\r\n            role: [{required: true, message: '请选择身份', trigger: 'change'}],\r\n            stu_id: [{required: true, message: '学号不能为空', trigger: 'blur'},\r\n                    {pattern: /^\\d{6,6}$/, message: '学号为6位数字', trigger: 'blur'},\r\n                    {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '学号必须为注册年份后两位开头的数字(小于22)'}],\r\n            teach_id: [{required: true, message: '工号不能为空', trigger: 'blur'},\r\n                    {pattern: /^\\d{8,8}$/, message: '工号为8位数字', trigger: 'blur'},\r\n                    {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '工号必须为注册年份后两位开头的数字(小于22)'}],\r\n            name: [{required: true, message: '姓名不能为空', trigger: 'blur'},\r\n                {validator: validName, trigger: ['blur', 'change']}],\r\n            id: [{ required: true, message: '身份证不能为空', trigger: 'blur'},\r\n                    { validator: validPassport, trigger: 'blur' }],\r\n            phone: [{required: false, trigger: ['blur', 'change']},\r\n                    {validator: validPhone, trigger: 'blur'}],\r\n            email: [{required: false, trigger: 'blur'},\r\n                    {validator: validEmail, trigger: 'blur'}],\r\n        },\r\n    }\r\n  },\r\n  watch:{\r\n    \"userData.college\": {\r\n      handler(){\r\n        this.userData.major='';  \r\n      },\r\n      deep: true  \r\n    }\r\n  },\r\n  methods: {\r\n      submit(){\r\n      this.$refs['userData'].validate(valid => {\r\n        if(valid){\r\n            this.dialogFormVisible = false\r\n        //   console.log(this.userData)\r\n        //   // axios.post('http://localhost:8081/register', null, {params:this.userData})\r\n        //   axios.post('http://localhost:8081/user/new', this.userData)\r\n        //   .then(function(resp){\r\n        //     console.log(resp)\r\n        //     alert('提交成功')\r\n              \r\n        //   }).catch(error => {\r\n        //     if(error.response.status == 421){\r\n        //       if(this.userData.role == 'student')\r\n        //         alert('学号已存在')\r\n        //       else\r\n        //         alert('工号已存在')\r\n        //       this.userData.stu_id = ''\r\n        //       this.userData.teach_id = ''\r\n        //     }\r\n        //     if(error.response.status == 420){\r\n        //       alert('身份证已存在');\r\n        //       this.userData.id = ''\r\n        //     }\r\n        //     console.dir(error);\r\n        //   })\r\n        }\r\n        else{\r\n          console.log('error ssssubmit');\r\n          return false\r\n        }\r\n      })\r\n        \r\n    }\r\n  },\r\n  mounted: function(){\r\n      this.userData.number=this.userData_.number\r\n      this.userData.id=this.userData_.id\r\n      this.userData.name=this.userData_.name\r\n      this.userData.phone=this.userData_.phone\r\n      this.userData.email=this.userData_.email\r\n      this.userData.password=this.userData_.password\r\n      this.userData.college=this.userData_.college\r\n      this.userData.major=this.userData_.major_\r\n}\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}