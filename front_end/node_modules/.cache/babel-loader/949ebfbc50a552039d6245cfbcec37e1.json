{"ast":null,"code":"// import axios from 'axios'\nimport { validName, validPhone, validPassport, validEmail } from './jsComponents/CheckRules'; //格式检查\n\nexport default {\n  name: 'MajorMaintenance',\n  props: {\n    id: Number\n  },\n\n  data() {\n    return {\n      dialogFormVisible: false,\n      formLabelWidth: '140px',\n      form: {},\n      userData: {\n        number: null,\n        role: 'student',\n        name: '',\n        id: '',\n        phone: '',\n        email: '',\n        stu_id: null,\n        teach_id: null,\n        password: '123456',\n        major: '',\n        college: {}\n      },\n      rules: {\n        role: [{\n          required: true,\n          message: '请选择身份',\n          trigger: 'change'\n        }],\n        stu_id: [{\n          required: true,\n          message: '学号不能为空',\n          trigger: 'blur'\n        }, {\n          pattern: /^\\d{6,6}$/,\n          message: '学号为6位数字',\n          trigger: 'blur'\n        }, {\n          pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/,\n          message: '学号必须为注册年份后两位开头的数字(小于22)'\n        }],\n        teach_id: [{\n          required: true,\n          message: '工号不能为空',\n          trigger: 'blur'\n        }, {\n          pattern: /^\\d{8,8}$/,\n          message: '工号为8位数字',\n          trigger: 'blur'\n        }, {\n          pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/,\n          message: '工号必须为注册年份后两位开头的数字(小于22)'\n        }],\n        name: [{\n          required: true,\n          message: '姓名不能为空',\n          trigger: 'blur'\n        }, {\n          validator: validName,\n          trigger: ['blur', 'change']\n        }],\n        id: [{\n          required: true,\n          message: '身份证不能为空',\n          trigger: 'blur'\n        }, {\n          validator: validPassport,\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: false,\n          trigger: ['blur', 'change']\n        }, {\n          validator: validPhone,\n          trigger: 'blur'\n        }],\n        email: [{\n          required: false,\n          trigger: 'blur'\n        }, {\n          validator: validEmail,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n\n  watch: {\n    \"userData.college\": {\n      handler() {\n        console.log(this.userData.college);\n        this.userData.major = '';\n      },\n\n      deep: true\n    }\n  },\n  methods: {\n    submit() {\n      console.log(this.id);\n      this.dialogFormVisible = false;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["validName","validPhone","validPassport","validEmail","name","props","id","Number","data","dialogFormVisible","formLabelWidth","form","userData","number","role","phone","email","stu_id","teach_id","password","major","college","rules","required","message","trigger","pattern","validator","watch","handler","console","log","deep","methods","submit"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\UserinfoMaintenance.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-button type=\"text\" @click=\"dialogFormVisible = true\"\r\n        >编辑</el-button\r\n    >\r\n\r\n    <el-dialog v-model=\"dialogFormVisible\" title=\"信息修改\" modal=\"false\">\r\n        <el-form id=\"admin_modify\" ref=\"userData\" :model=\"userData\" :rules=\"rules\" autocomplete=\"on\"  text-align: center>\r\n            <el-form-item class=\"college\" prop=\"college\">\r\n                <el-select v-model=\"userData.college\" value-key=\"name\" placeholder=\"学院\">\r\n                <el-option :key=\"colleges.id\" :value=\"colleges\" :label=\"colleges.name\" v-for=\"colleges in collegeData\" ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item class=\"major\" prop=\"major\" >\r\n                <el-select v-model=\"userData.major\" placeholder=\"专业\">\r\n                <el-option :key=\"major.id\" :value=\"major.name\" :label=\"major.name\" v-for=\"major in userData.college.major\" ></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            \r\n            <el-form-item prop=\"name\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                v-model=\"userData.name\"\r\n                placeholder=\"姓名\"\r\n                />\r\n            </el-form-item> \r\n\r\n            <el-form-item prop=\"id\">\r\n                <el-input\r\n                name=\"id\"\r\n                v-model=\"userData.id\"\r\n                placeholder=\"身份证号\"\r\n                type=\"text\"\r\n                />\r\n            </el-form-item>\r\n\r\n            <el-form-item prop=\"phone\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"phone\"\r\n                v-model=\"userData.phone\"\r\n                placeholder=\"手机号\"\r\n                />\r\n            </el-form-item> \r\n\r\n            <el-form-item prop=\"email\">\r\n                <el-input\r\n                type=\"text\"\r\n                name=\"email\"\r\n                v-model=\"userData.email\"\r\n                placeholder=\"邮箱\"\r\n                />\r\n            </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n        <span class=\"dialog-footer\">\r\n            <el-button @click=\"dialogFormVisible = false\">Cancel</el-button>\r\n            <el-button type=\"primary\" @click=\"submit\"\r\n            >Confirm</el-button\r\n            >\r\n        </span>\r\n        </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n// import axios from 'axios'\r\n\r\nimport {validName,validPhone,validPassport,validEmail} from './jsComponents/CheckRules'//格式检查\r\nexport default {\r\n  name: 'MajorMaintenance',\r\n  props: {\r\n      id: Number\r\n  },\r\n  data() {\r\n    return {\r\n\r\n        dialogFormVisible: false,\r\n        formLabelWidth: '140px',\r\n        form: {\r\n        },\r\n        userData: {\r\n        number: null,\r\n        role: 'student',\r\n        name: '',\r\n        id: '',\r\n        phone: '',\r\n        email: '',\r\n        stu_id: null,\r\n        teach_id: null,\r\n        password: '123456',\r\n        major: '',\r\n        college: {},\r\n        },\r\n        rules: {\r\n            role: [{required: true, message: '请选择身份', trigger: 'change'}],\r\n            stu_id: [{required: true, message: '学号不能为空', trigger: 'blur'},\r\n                    {pattern: /^\\d{6,6}$/, message: '学号为6位数字', trigger: 'blur'},\r\n                    {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '学号必须为注册年份后两位开头的数字(小于22)'}],\r\n            teach_id: [{required: true, message: '工号不能为空', trigger: 'blur'},\r\n                    {pattern: /^\\d{8,8}$/, message: '工号为8位数字', trigger: 'blur'},\r\n                    {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '工号必须为注册年份后两位开头的数字(小于22)'}],\r\n            name: [{required: true, message: '姓名不能为空', trigger: 'blur'},\r\n                {validator: validName, trigger: ['blur', 'change']}],\r\n            id: [{ required: true, message: '身份证不能为空', trigger: 'blur'},\r\n                    { validator: validPassport, trigger: 'blur' }],\r\n            phone: [{required: false, trigger: ['blur', 'change']},\r\n                    {validator: validPhone, trigger: 'blur'}],\r\n            email: [{required: false, trigger: 'blur'},\r\n                    {validator: validEmail, trigger: 'blur'}],\r\n        },\r\n    }\r\n  },\r\n  watch:{\r\n    \"userData.college\": {\r\n      handler(){\r\n        console.log(this.userData.college)\r\n        this.userData.major='';  \r\n      },\r\n      deep: true  \r\n    }\r\n  },\r\n  methods: {\r\n    submit(){\r\n        console.log(this.id)\r\n        this.dialogFormVisible = false\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}