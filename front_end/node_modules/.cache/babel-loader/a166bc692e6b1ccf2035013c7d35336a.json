{"ast":null,"code":"import { setCourseTime } from '../jsComponents/CourseSet'; // import { ElMessage} from 'element-plus'\n\nimport axios from 'axios';\nimport global_ from '../jsComponents/global';\nimport { Search } from '@element-plus/icons-vue';\nexport default {\n  components: {\n    Search\n  },\n\n  data() {\n    return {\n      rules: {\n        applyReason: [{\n          required: true,\n          message: '请输入申请理由',\n          trigger: 'blur'\n        }]\n      },\n      dialogAvlVis: [false, false, false, false, false, false, false, false],\n      majorAvlVis: [false, false, false, false, false, false, false, false, false, false, false, false],\n      applyTableVisible: false,\n      semesters: global_.semesters,\n      years: global_.years,\n      activeName: 'available',\n      searchContent: '',\n      courseOpen: true,\n      courses: [{\n        courseId: 1,\n        courseName: '软件工程',\n        courseNum: 'SOFT220011',\n        classHours: '4',\n        credits: '4',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [1, 2, 3, 5, 6, 8, 10, 11, 12], [3], [], [], [], []],\n        building: 'H3',\n        roomNum: '301',\n        courseInfo: '123',\n        selected: '80',\n        capacity: '100',\n        type: 'normal'\n      }, {\n        courseId: 2,\n        courseName: '离散数学',\n        courseNum: 'SOFT220022',\n        classHours: '3',\n        credits: '5',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [], [], [3, 8], []],\n        building: 'HGX',\n        roomNum: '502',\n        courseInfo: '123',\n        selected: '100',\n        capacity: '100',\n        type: 'normal'\n      }],\n      applyCourse: {\n        applyReason: ''\n      } // applyReason: '',\n\n    };\n  },\n\n  computed: {},\n  methods: {\n    submitSearch() {\n      console.log(this.searchContent); //axios searchContent\n    },\n\n    handleClick(tab, event) {\n      console.log(tab, event);\n\n      if (tab.props.name == 'available') {\n        //axios获取可选课程\n        console.log(1);\n      }\n\n      if (tab.props.name == 'selected') {\n        //axios获取已选课程\n        console.log(2);\n      }\n    },\n\n    handleApply(index) {\n      // this.selectedCourses.push(this.courses[index])\n      this.applyTableVisible = true;\n      this.applyCourse = JSON.parse(JSON.stringify(this.courses[index]));\n      this.applyCourse.applyReason = '';\n      console.log(this.applyCourse);\n    },\n\n    cancelApply() {\n      this.applyTableVisible = false;\n    },\n\n    submitApply() {\n      this.$refs['applyCourse'].validate(valid => {\n        if (valid) {\n          //axios\n          this.applyTableVisible = false;\n        }\n      });\n    }\n\n  },\n\n  async created() {\n    axios.get('http://localhost:8081/user/curriculaVariable').then(res => {\n      this.courseOpen = res.data.data1;\n    }).catch(error => {\n      console.dir(error);\n    });\n    await axios.get('http://localhost:8081/student/course').then(res => {\n      this.courses = res.data.data1;\n    });\n\n    for (let course of this.courses) {\n      this.dialogTableVisible.push(false);\n      course.courseTime = '';\n      setCourseTime(course, course.times);\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["setCourseTime","axios","global_","Search","components","data","rules","applyReason","required","message","trigger","dialogAvlVis","majorAvlVis","applyTableVisible","semesters","years","activeName","searchContent","courseOpen","courses","courseId","courseName","courseNum","classHours","credits","courseTime","collegeId","collegeName","times","building","roomNum","courseInfo","selected","capacity","type","applyCourse","computed","methods","submitSearch","console","log","handleClick","tab","event","props","name","handleApply","index","JSON","parse","stringify","cancelApply","submitApply","$refs","validate","valid","created","get","then","res","data1","catch","error","dir","course","dialogTableVisible","push"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\course\\CourseApplication.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"!courseOpen\"> <h2>选课时间未到</h2></div>\r\n    <div v-if=\"courseOpen\">\r\n        <el-tabs class=\"course-application\" v-model=\"activeName\" type=\"border-card\" @tab-click=\"handleClick\">\r\n            <el-tab-pane label=\"选课申请\" name=\"available\">\r\n                <h2>选课申请</h2>\r\n                <el-input class=\"search\" placeholder=\"搜索课程\" v-model=\"searchContent\" @keyup.enter=\"submitSearch\"> \r\n                    <template #suffix>\r\n                        <el-icon @click=\"submitSearch\" class=\"el-input__icon\"><search /></el-icon>\r\n                    </template>\r\n                </el-input>\r\n                <!-- <el-button @click=\"test\">test </el-button> -->\r\n                <el-table class=\"class-table\" :data=\"courses\" max-height=\"500px\">\r\n                    <el-table-column fixed prop=\"courseName\" label=\"课程名\" width=\"150\" />\r\n                    <el-table-column fixed prop=\"courseNum\" label=\"课程编号\" width=\"140\" />\r\n                    <el-table-column prop=\"collegeName\" label=\"开课院系\" width=\"180\" />\r\n                    <el-table-column prop=\"teacherName\" label=\"课程教师姓名\" width=\"120\" />\r\n                    <el-table-column prop=\"commonCourse\" label=\"课程类型\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <div v-if=\"scope.row.commonCourse == '通选课程'\">通选课程</div>\r\n                            <div v-if=\"scope.row.commonCourse == '专业课程'\">\r\n                                <span style=\"padding-right:10px\">专业课程</span>\r\n                                <el-button type=\"text\" @click=\"majorAvlVis[scope.$index] = true\">查看专业</el-button>\r\n                                <el-dialog v-model=\"majorAvlVis[scope.$index]\" title=\"课程可选专业\" :append-to-body=\"true\">\r\n                                    <div v-for=\"major in scope.row.majors\" :key=\"major\">\r\n                                        {{major[1]}} ({{major[0]}})\r\n                                    </div>\r\n                                </el-dialog>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"classHours\" label=\"学时\" width=\"60\" />\r\n                    <el-table-column prop=\"credits\" label=\"学分\" width=\"60\" />\r\n                    <el-table-column prop=\"building,roomNum\" label=\"上课地点\" width=\"80\" >\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.building}}{{scope.row.roomNum}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseTime\" label=\"上课时间\" width=\"180\" />\r\n                    <el-table-column prop=\"capacity,selected\" label=\"选课人数\" width=\"150\">\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.selected}}/{{scope.row.capacity}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseInfo\" label=\"介绍\" width=\"150\" >\r\n                        <template #default=\"scope\">\r\n                            <el-button type=\"text\" @click=\"dialogAvlVis[scope.$index] = true\">查看详情</el-button>\r\n                            <el-dialog v-model=\"dialogAvlVis[scope.$index]\" title=\"课程介绍\" :append-to-body=\"true\">\r\n                            {{scope.row.courseInfo}}\r\n                            </el-dialog>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <el-button @click=\"handleApply(scope.$index)\">填写申请</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n                <el-dialog \r\n                    width=\"50%\"\r\n                    v-model=\"applyTableVisible\" \r\n                    title=\"选课申请\" \r\n                    :append-to-body=\"true\" \r\n                    >\r\n                    <el-form \r\n                        class=\"course-apply\"\r\n                        :model=\"applyCourse\" \r\n                        :rules=\"rules\" \r\n                        hide-required-asterisk\r\n                        ref=\"applyCourse\"\r\n                        >\r\n                        <el-form-item prop=\"courseName\" label=\"课程名称\">\r\n                            <el-input disabled type=\"text\" name=\"courseName\" v-model=\"applyCourse.courseName\"/>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"课程编号\" prop=\"courseNum\">\r\n                            <el-input disabled v-model=\"applyCourse.courseNum\" />\r\n                        </el-form-item>\r\n                        <el-form-item label=\"课程学分\" prop=\"credits\">\r\n                            <el-input disabled v-model=\"applyCourse.credits\" />\r\n                        </el-form-item>                     \r\n                        <el-form-item label=\"任课教师\" prop=\"teacher\">\r\n                            <el-input disabled v-model=\"applyCourse.teacherName\" />\r\n                        </el-form-item>\r\n                        <el-form-item label=\"上课教室\" prop=\"selectRoom\">\r\n                            <el-input disabled v-model=\"applyCourse.building\" />          \r\n                        </el-form-item>\r\n                        <el-form-item label=\"申请理由\" prop=\"applyReason\" >\r\n                            <el-input type=\"textarea\" v-model=\"applyCourse.applyReason\" />\r\n                        </el-form-item>\r\n                    </el-form>\r\n                    \r\n                    <span class=\"dialog-footer\">\r\n                        <el-button @click=\"cancelApply\">取消</el-button>\r\n                        <el-button type=\"primary\" @click=\"submitApply\">确认</el-button>\r\n                    </span>\r\n                </el-dialog>\r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"我的申请\" name=\"application\">\r\n            </el-tab-pane>\r\n        </el-tabs>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {setCourseTime} from '../jsComponents/CourseSet'\r\n// import { ElMessage} from 'element-plus'\r\nimport axios from 'axios'\r\nimport global_ from '../jsComponents/global'\r\nimport { Search } from '@element-plus/icons-vue'\r\nexport default {\r\n    components: {\r\n        Search\r\n    },\r\n    data() {\r\n        return {\r\n            rules: {applyReason: [{required: true, message: '请输入申请理由', trigger: 'blur'}]},\r\n            dialogAvlVis:[false,false,false,false,false,false,false,false,],\r\n            majorAvlVis:[false,false,false,false,false,false,false,false,false,false,false,false,],\r\n            applyTableVisible:false,\r\n            semesters: global_.semesters,\r\n            years: global_.years,\r\n            activeName: 'available',\r\n            searchContent: '',\r\n            courseOpen: true,\r\n            courses: [\r\n                {\r\n                    courseId: 1,\r\n                    courseName: '软件工程',\r\n                    courseNum: 'SOFT220011',\r\n                    classHours: '4',\r\n                    credits: '4',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [1,2,3,5,6,8,10,11,12],\r\n                        [3],\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        []\r\n                    ],\r\n                    building: 'H3',\r\n                    roomNum: '301',\r\n                    courseInfo: '123',\r\n                    selected: '80',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                },\r\n                {\r\n                    courseId: 2,\r\n                    courseName: '离散数学',\r\n                    courseNum: 'SOFT220022',\r\n                    classHours: '3',\r\n                    credits: '5',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        [3,8],\r\n                        []\r\n                    ],\r\n                    building: 'HGX',\r\n                    roomNum: '502',\r\n                    courseInfo: '123',\r\n                    selected: '100',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                }\r\n            ],\r\n            applyCourse: {applyReason: ''},\r\n            // applyReason: '',\r\n        }\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    methods: {\r\n         submitSearch() {\r\n            console.log(this.searchContent)\r\n            //axios searchContent\r\n          \r\n        },\r\n        handleClick(tab, event) {\r\n            console.log(tab,event)\r\n            if(tab.props.name == 'available'){\r\n                //axios获取可选课程\r\n                console.log(1)\r\n            }\r\n            if(tab.props.name == 'selected') {\r\n                //axios获取已选课程\r\n                console.log(2)\r\n            }\r\n        },\r\n        handleApply(index) {\r\n            // this.selectedCourses.push(this.courses[index])\r\n            this.applyTableVisible = true\r\n            this.applyCourse = JSON.parse(JSON.stringify(this.courses[index]))\r\n            this.applyCourse.applyReason = ''\r\n            console.log(this.applyCourse)\r\n        },\r\n        cancelApply() {\r\n            this.applyTableVisible = false\r\n        },\r\n        submitApply() {\r\n            this.$refs['applyCourse'].validate(valid => {\r\n                if(valid) {\r\n                    //axios\r\n                    this.applyTableVisible = false\r\n                }\r\n            })\r\n        }\r\n    },\r\n    async created() {\r\n        axios.get('http://localhost:8081/user/curriculaVariable')\r\n        .then(res => {\r\n            this.courseOpen = res.data.data1\r\n        })\r\n        .catch(error => {\r\n            console.dir(error)\r\n        })\r\n        await axios.get('http://localhost:8081/student/course')\r\n        .then(res => {\r\n            this.courses = res.data.data1\r\n        })\r\n        for(let course of this.courses) {\r\n            this.dialogTableVisible.push(false)\r\n            course.courseTime = ''\r\n            setCourseTime(course, course.times)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.course-application .search {\r\n    display: block;\r\n    float: none;\r\n    margin: auto;\r\n    width: 300px;\r\n    margin-bottom: 50px;\r\n}\r\n.search .el-input__suffix {\r\n    cursor: pointer;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}