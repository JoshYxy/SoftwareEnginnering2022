{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"custom-tree-node\"\n};\nconst _hoisted_2 = [\"onClick\"];\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Are you sure to delete this?\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  style: {\n    \"text-align\": \"right\",\n    \"margin\": \"0\"\n  }\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"cancel\");\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"confirm\");\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"Delete\");\n\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_popover = _resolveComponent(\"el-popover\");\n\n  const _component_el_tree = _resolveComponent(\"el-tree\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_el_tree, {\n    data: this.collegeData,\n    \"node-key\": \"id\",\n    \"default-expand-all\": \"\",\n    props: this.defaultProps,\n    \"expand-on-click-node\": false,\n    class: \"el-tree-container\"\n  }, {\n    default: _withCtx(({\n      node,\n      data\n    }) => [_createElementVNode(\"span\", _hoisted_1, [_createElementVNode(\"span\", null, _toDisplayString(data.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"span\", null, [data.major ? (_openBlock(), _createElementBlock(\"a\", {\n      key: 0,\n      onClick: $event => $options.append(data)\n    }, \" 新增 \", 8\n    /* PROPS */\n    , _hoisted_2)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_popover, {\n      visible: _ctx.visible,\n      \"onUpdate:visible\": _cache[3] || (_cache[3] = $event => _ctx.visible = $event),\n      placement: \"top\",\n      width: 160\n    }, {\n      reference: _withCtx(() => [_createVNode(_component_el_button, {\n        onClick: _cache[2] || (_cache[2] = $event => _ctx.visible = true)\n      }, {\n        default: _withCtx(() => [_hoisted_7]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      default: _withCtx(() => [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"text\",\n        onClick: _cache[0] || (_cache[0] = $event => _ctx.visible = false)\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"primary\",\n        onClick: _cache[1] || (_cache[1] = $event => _ctx.visible = false)\n      }, {\n        default: _withCtx(() => [_hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      })])]),\n      _: 1\n      /* STABLE */\n\n    }, 8\n    /* PROPS */\n    , [\"visible\"]), _createElementVNode(\"a\", {\n      onClick: $event => $options.alter(data)\n    }, \" 修改 \", 8\n    /* PROPS */\n    , _hoisted_8), _createElementVNode(\"a\", {\n      onClick: $event => $options.remove(node, data)\n    }, \" 删除 \", 8\n    /* PROPS */\n    , _hoisted_9)])])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"data\", \"props\"])]);\n}","map":{"version":3,"mappings":";;AAWcA,OAAK,EAAC;;;;gCAKNC,oBAAmC,GAAnC,EAAmC,IAAnC,EAAG,8BAAH,EAA+B;AAAA;AAA/B;;;AACKC,OAAoC,EAApC;AAAA;AAAA;AAAA;;;iDAEA;;iDAGA;;iDAIgC;;;;;;;;;;;uBAzBjDC,oBAkCM,KAlCN,EAkCM,IAlCN,EAkCM,CAjCJC,aAgCUC,kBAhCV,EAgCU;AA/BPC,QAAI,OAAOC,WA+BJ;AA9BR,gBAAS,IA8BD;AA7BR,4BA6BQ;AA5BPC,SAAK,OAAOC,YA4BL;AA3BP,4BAAsB,KA2Bf;AA1BRT,SAAK,EAAC;AA0BE,GAhCV;AAQaU,WAAO,WAChB,CAqBO;AAtBaC,UAsBb;AAtBmBL;AAsBnB,KArBP,KAD8B,CAC9BL,oBAqBO,MArBP,cAqBO,CApBLA,oBAA4B,MAA5B,EAA4B,IAA5B,EAA4BW,iBAAnBN,IAAI,CAACO,IAAc,CAA5B,EAAkB;AAAA;AAAlB,KAoBK,EAnBLZ,oBAkBO,MAlBP,EAkBO,IAlBP,EAkBO,CAjBIK,IAAI,CAACQ,uBAAdX,oBAAmD,GAAnD,EAAmD;YAAA;AAA7BY,aAAK,YAAEC,gBAAOV,IAAP;AAAsB,KAAnD,EAA2C,MAA3C,EAA+C;AAAA;AAA/C,MAA+CW,UAA/C,sCAiBK,EAhBLb,aAaac,qBAbb,EAaa;AAbOC,aAAO,EAAEC,YAahB;8DAbgBA,eAAOC,OAavB;AAbyBC,eAAS,EAAC,KAanC;AAb0CC,WAAK,EAAE;AAajD,KAbb;AAUaC,eAAS,WAClB,MAAqD,CAArDpB,aAAqDqB,oBAArD,EAAqD;AAAzCV,eAAK,sCAAEK,eAAO,IAAT;AAAoC,OAArD;0BAAmC,MAAM;;;;OAAzC,CAAqD,CADnC;wBATpB,MAAmC,CAAnCM,UAAmC,EACnCzB,oBAOM,KAPN,cAOM,CANJG,aAECqB,oBAFD,EAEC;AAFUE,YAAI,EAAC,OAEf;AAFuBC,YAAI,EAAC,MAE5B;AAFoCb,eAAK,sCAAEK,eAAO,KAAT;AAEzC,OAFD;0BACG,MAAM;;;;OADT,CAMI,EAHJhB,aAECqB,oBAFD,EAEC;AAFUE,YAAI,EAAC,OAEf;AAFuBC,YAAI,EAAC,SAE5B;AAFuCb,eAAK,sCAAEK,eAAO,KAAT;AAE5C,OAFD;0BACG,MAAO;;;;OADV,CAGI,CAPN,CADmC;;;;KADrC;;AAAA,kBAgBK,EAFLnB,oBAAgC,GAAhC,EAAgC;AAA5Bc,aAAK,YAAEC,eAAMV,IAAN;AAAqB,KAAhC,EAAwB,MAAxB,EAA4B;AAAA;AAA5B,MAA4BuB,UAA5B,CAEK,EADL5B,oBAAuC,GAAvC,EAAuC;AAAnCc,aAAK,YAAEC,gBAAOL,IAAP,EAAaL,IAAb;AAA4B,KAAvC,EAA+B,MAA/B,EAAmC;AAAA;AAAnC,MAAmCwB,UAAnC,CACK,CAlBP,CAmBK,CArBP,CAD8B,CAAd;;;;GARpB;;AAAA,sBAiCI,CAlCN","names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_el_tree","data","collegeData","props","defaultProps","default","node","_toDisplayString","name","major","onClick","$options","_hoisted_2","_component_el_popover","visible","_ctx","$event","placement","width","reference","_component_el_button","_hoisted_3","size","type","_hoisted_8","_hoisted_9"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\MajorMaintenance.vue"],"sourcesContent":["<template>\r\n  <div >\r\n    <el-tree\r\n      :data=\"this.collegeData\"\r\n      node-key=\"id\"\r\n      default-expand-all\r\n      :props=\"this.defaultProps\" \r\n      :expand-on-click-node=\"false\"\r\n      class=\"el-tree-container\"\r\n    >\r\n      <template #default=\"{ node, data }\">\r\n        <span class=\"custom-tree-node\">\r\n          <span>{{ data.name }}</span>\r\n          <span>\r\n            <a v-if=\"data.major\" @click=\"append(data)\"> 新增 </a>\r\n            <el-popover v-model:visible=\"visible\" placement=\"top\" :width=\"160\">\r\n              <p>Are you sure to delete this?</p>\r\n              <div style=\"text-align: right; margin: 0\">\r\n                <el-button size=\"small\" type=\"text\" @click=\"visible = false\"\r\n                  >cancel</el-button\r\n                >\r\n                <el-button size=\"small\" type=\"primary\" @click=\"visible = false\"\r\n                  >confirm</el-button\r\n                >\r\n              </div>\r\n              <template #reference>\r\n                <el-button @click=\"visible = true\">Delete</el-button>\r\n              </template>\r\n            </el-popover>\r\n            <a @click=\"alter(data)\"> 修改 </a>\r\n            <a @click=\"remove(node, data)\"> 删除 </a>\r\n          </span>\r\n        </span>\r\n      </template>\r\n    </el-tree>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n// import axios from 'axios'\r\nexport default {\r\n  name: 'MajorMaintenance',\r\n  data() {\r\n    return { \r\n      id: 100,\r\n      defaultProps: {\r\n        children: 'major',\r\n        label: 'name',\r\n      },\r\n      collegeData: [\r\n        { \r\n          id: 1,\r\n          name: '计算机科学技术学院', \r\n          major: [\r\n              {id: 1, name: '大数据'},\r\n              {id: 2, name: '信息安全'}\r\n          ]\r\n        },\r\n        { \r\n          id: 2,\r\n          name: '生命科学学院', \r\n          major: [\r\n              {id: 1, name: '生物'},\r\n              {id: 2, name: '123'}\r\n          ]\r\n        },\r\n        { \r\n          id: 3,\r\n          name: '软件工程学院', \r\n          major: [\r\n              {id: 1, name: '软件工程'},\r\n          ]\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    append(data) {\r\n      const newChild = { id: this.id++, name: '新的专业'}\r\n      if (!data.major) {\r\n        data.major = []\r\n      }\r\n      data.major.push(newChild)\r\n      console.log(this.collegeData)\r\n      this.collegeData = [...this.collegeData]//更新数据，刷新页面\r\n    },\r\n    alter(data) {\r\n      \r\n    },\r\n    remove(node, data) {\r\n\r\n      const parent = node.parent\r\n      const children = parent.data.major || parent.data\r\n      const index = children.findIndex((d) => d.id === data.id)\r\n      children.splice(index, 1)\r\n      this.collegeData = [...this.collegeData]\r\n      console.log(this.collegeData)\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.el-tree-container{\r\n  width:500px;\r\n  margin-left: 150px;\r\n}\r\n.el-tree-node__expand-icon{\r\n  width:300px;\r\n  max-height: 12px;\r\n  margin-right:-140px;\r\n  transform: none !important;\r\n}\r\n.el-tree-node__expand-icon .expanded{\r\n  width:300px;\r\n  max-height: 12px;\r\n  transform: rotate(90deg);\r\n  margin-right:-150px;\r\n  position: relative;\r\n  transform: none !important;\r\n}\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 14px;\r\n  padding-right: 8px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}