{"ast":null,"code":"import { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  data() {\n    return {\n      // courses: [\n      //     {id:1, name:'第1节课'},\n      //     {id:2, name:'第2节课'},\n      //     {id:3, name:'第3节课'},\n      // ],\n      startTime: ['08:00'],\n      endTime: ['08:40'],\n      newRoom: '',\n      //存放input输入的教室号\n      newClassroom: {\n        name: '',\n        aka: '',\n        room: []\n      },\n      //存档select选择的教学楼\n      classroom: [{\n        name: '第三教学楼',\n        aka: 'H3',\n        room: ['301', '402']\n      }, {\n        name: '光华楼西辅楼',\n        aka: 'HGX',\n        room: ['201', '502']\n      }],\n      //存放所有的教学楼及教室号信息\n      buildings: [{\n        name: '第三教学楼',\n        aka: 'H3'\n      }, {\n        name: '第四教学楼',\n        aka: 'H4'\n      }, {\n        name: '光华楼西辅楼',\n        aka: 'HGX'\n      }, {\n        name: '第五教学楼',\n        aka: 'H5'\n      }, {\n        name: '第六教学楼',\n        aka: 'H6'\n      }]\n    };\n  },\n\n  methods: {\n    deleteCourse(index) {\n      // this.courses.splice(index,1)\n      this.startTime.splice(index, 1);\n      this.endTime.splice(index, 1);\n    },\n\n    addCourse(index) {\n      // this.courses.splice(index+1,0,{id:100, name:'dis'})\n      this.startTime.splice(index + 1, 0, '');\n      this.endTime.splice(index + 1, 0, ''); // this.courses.push({\n      //     id:this.courses.length+1,\n      //     name:'第'+(this.courses.length+1)+'节课'\n      // })\n      // console.log(this.courses)\n    },\n\n    checkName() {\n      return 1;\n    },\n\n    addClassroom() {\n      //axios\n      if (this.newRoom === '') {\n        alert('教室号不能为空');\n        return;\n      }\n\n      var i;\n      i = this.classroom.findIndex(building => building.name == this.newClassroom.name); //寻找classroom已有的教学楼中是否有newClassroom中的教学楼 \n\n      if (i >= 0) {\n        if (this.classroom[i].room.indexOf(this.newRoom) > -1) {\n          alert('教室已存在，请勿重复添加');\n          this.newRoom = '';\n          return;\n        }\n\n        this.classroom[i].room.push(this.newRoom);\n        this.classroom[i].room.sort((a, b) => {\n          if (a.length < b.length) return -1;else if (a.length > b.length) return 1;else return a.localeCompare(b);\n        });\n      } else {\n        this.newClassroom.room = [];\n        this.newClassroom.room.push(this.newRoom);\n        this.classroom.push(this.newClassroom);\n      }\n\n      this.newRoom = '';\n    },\n\n    openDelete(index) {\n      ElMessageBox.confirm('是否删除教学楼：' + this.classroom[index].name, 'Warning', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.deleteBuilding(index);\n        ElMessage({\n          type: 'success',\n          message: '删除成功'\n        });\n      }).catch(() => {\n        ElMessage({\n          type: 'info',\n          message: '删除取消'\n        });\n      });\n    },\n\n    deleteBuilding(index) {\n      //axios\n      this.classroom.splice(index, 1);\n    },\n\n    test(index) {\n      // console.log(this.startTime)\n      console.log(index);\n      console.log(this.newClassroom);\n      console.log(this.classroom);\n    },\n\n    submit() {//axios\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["ElMessage","ElMessageBox","data","startTime","endTime","newRoom","newClassroom","name","aka","room","classroom","buildings","methods","deleteCourse","index","splice","addCourse","checkName","addClassroom","alert","i","findIndex","building","indexOf","push","sort","a","b","length","localeCompare","openDelete","confirm","confirmButtonText","cancelButtonText","type","then","deleteBuilding","message","catch","test","console","log","submit"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\course\\EduMaintenance.vue"],"sourcesContent":["<template>\r\n    <div >\r\n        <h2>教学时间设置</h2>\r\n        <el-button @click=\"addCourse(-1)\">增加第一节课</el-button>\r\n        <el-button type='primary' @click=\"submit\">提交修改</el-button>\r\n        <div class=\"course-container\" v-for=\"(item, index) in startTime\" :key=\"item.id\">\r\n            <span class=\"course-left\">第{{index+1}}节课</span>\r\n            <div class=\"course-right\">\r\n                <el-time-select\r\n                    v-model=\"startTime[index]\"\r\n                    :min-time=\"index==0?'7:55':(endTime[index-1]?endTime[index-1]:'8:00')\"\r\n                    :max-time=\"endTime[index]\"\r\n                    :start=\"index==0?'8:00':(endTime[index-1]?endTime[index-1]:'8:00')\"\r\n                    placeholder=\"上课时间\"\r\n                    step=\"00:05\"\r\n                    end=\"22:30\"\r\n                    />-\r\n                <el-time-select\r\n                    v-model=\"endTime[index]\"\r\n                    :min-time=\"startTime[index]\"\r\n                    :max-time=\"startTime[index+1]\"\r\n                    :start=\"startTime[index]?startTime[index]:'8:00'\"\r\n                    placeholder=\"下课时间\"\r\n                    step=\"00:05\"\r\n                    end=\"23:30\"\r\n                    />\r\n                <el-button @click=\"addCourse(index)\">增加一节课</el-button>\r\n                <el-button @click=\"deleteCourse(index)\">删除这节课</el-button>\r\n                <el-button @click=\"test(index)\">test</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"class-container\">\r\n            <h2>上课教室设置</h2>\r\n            <el-input\r\n                v-model=\"newRoom\"\r\n                placeholder=\"教室号\"\r\n                class=\"input-with-select\"\r\n                \r\n                >\r\n                <template #prepend>\r\n                    <el-select v-model=\"newClassroom\" placeholder=\"教学楼\" value-key=\"name\" style=\"width: 150px\">\r\n                        <el-option v-for=\"(building) in buildings\" :key=\"building.name\" :value=\"building\" :label=\"building.name\"  />\r\n                    </el-select>\r\n                </template>\r\n                <template #append>\r\n                    <section style=\"width: 150px\"> {{newClassroom.aka}}{{newRoom}} </section>\r\n                    \r\n                </template>\r\n            </el-input>\r\n            <el-button @keydown=\"addClassroom\" @click=\"addClassroom\">添加新教室</el-button>\r\n        </div>\r\n        <div class=\"classroom-container\">\r\n            <el-card \r\n                class=\"box-card\"\r\n                v-for=\"(building, index) in classroom\"\r\n                :key=\"building.name\"\r\n                >\r\n                <template #header>\r\n                <div class=\"card-header\">\r\n                    <span>{{building.name}}</span>\r\n                    <el-button class=\"button\" type=\"text\" @click=\"openDelete(index)\">删除该教学楼</el-button>\r\n                </div>\r\n                </template>\r\n                <el-scrollbar height=\"200px\">\r\n                    <el-button class=\"button\" type=\"text\" @click=\"openDelete(index)\">删除教室</el-button>\r\n                    <div v-for=\"room in building.room\" :key=\"room\" class=\"text item\">\r\n                        {{building.aka}}{{room}} \r\n                        <el-button size='small'>\r\n                            删除\r\n                        </el-button>    \r\n                    </div>\r\n                </el-scrollbar>\r\n\r\n            </el-card>\r\n        </div>\r\n        <el-checkbox-group v-model=\"classroom[0].room\">\r\n            <el-checkbox label=\"Option A\" />\r\n            <el-checkbox label=\"Option B\" />\r\n            <el-checkbox label=\"Option C\" />\r\n            <el-checkbox label=\"disabled\" disabled />\r\n            <el-checkbox label=\"selected and disabled\" disabled />\r\n        </el-checkbox-group>  \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nexport default {\r\n    data() {\r\n        return {\r\n            // courses: [\r\n            //     {id:1, name:'第1节课'},\r\n            //     {id:2, name:'第2节课'},\r\n            //     {id:3, name:'第3节课'},\r\n\r\n            // ],\r\n            startTime:['08:00'],\r\n            endTime:['08:40'],\r\n            newRoom:'',//存放input输入的教室号\r\n            newClassroom: {\r\n                name: '',\r\n                aka: '',\r\n                room: [],\r\n            },//存档select选择的教学楼\r\n            classroom: [\r\n                {\r\n                    name: '第三教学楼',\r\n                    aka: 'H3',\r\n                    room: [\r\n                        '301','402'\r\n                    ]\r\n                },\r\n                {\r\n                    name: '光华楼西辅楼',\r\n                    aka: 'HGX',\r\n                    room: [\r\n                        '201','502'\r\n                    ]\r\n                },\r\n            ],//存放所有的教学楼及教室号信息\r\n            buildings: [\r\n                {name: '第三教学楼', aka: 'H3'},\r\n                {name: '第四教学楼', aka: 'H4'},\r\n                {name: '光华楼西辅楼', aka: 'HGX'},\r\n                {name: '第五教学楼', aka: 'H5'},\r\n                {name: '第六教学楼', aka: 'H6'},\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        deleteCourse(index) {\r\n            // this.courses.splice(index,1)\r\n            this.startTime.splice(index,1)\r\n            this.endTime.splice(index,1)\r\n        },\r\n        addCourse(index) {\r\n            // this.courses.splice(index+1,0,{id:100, name:'dis'})\r\n            this.startTime.splice(index+1,0,'')\r\n            this.endTime.splice(index+1,0,'')\r\n            // this.courses.push({\r\n            //     id:this.courses.length+1,\r\n            //     name:'第'+(this.courses.length+1)+'节课'\r\n            // })\r\n            // console.log(this.courses)\r\n        },\r\n        checkName() {\r\n            return 1\r\n        },\r\n        addClassroom() {\r\n            //axios\r\n            if(this.newRoom === '') {\r\n                alert('教室号不能为空')\r\n                return\r\n            }\r\n            var i;\r\n            i = this.classroom.findIndex((building) => building.name == this.newClassroom.name)//寻找classroom已有的教学楼中是否有newClassroom中的教学楼 \r\n            if(i >= 0) {\r\n                if(this.classroom[i].room.indexOf(this.newRoom) > -1) {\r\n                    alert('教室已存在，请勿重复添加')\r\n                    this.newRoom = ''\r\n                    return\r\n                }\r\n               \r\n                this.classroom[i].room.push(this.newRoom) \r\n                this.classroom[i].room.sort((a, b) => {\r\n                    if(a.length < b.length) return -1\r\n                    else if(a.length > b.length) return 1\r\n                    else return a.localeCompare(b)   \r\n                })\r\n            } \r\n            else {\r\n                this.newClassroom.room=[]\r\n                this.newClassroom.room.push(this.newRoom)\r\n                this.classroom.push(this.newClassroom)\r\n            }\r\n            this.newRoom = ''\r\n        },\r\n        openDelete(index) {\r\n            ElMessageBox.confirm(\r\n                '是否删除教学楼：' + this.classroom[index].name,\r\n                'Warning',\r\n                {\r\n                    confirmButtonText: '确认',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning',\r\n                }\r\n            )\r\n            .then(() => {\r\n                this.deleteBuilding(index)\r\n                ElMessage({\r\n                    type: 'success',\r\n                    message: '删除成功',\r\n                })\r\n                })\r\n            .catch(() => {\r\n                ElMessage({\r\n                    type: 'info',\r\n                    message: '删除取消',\r\n                })\r\n            })\r\n        },\r\n        deleteBuilding(index) {\r\n        //axios\r\n            this.classroom.splice(index, 1)\r\n        },\r\n        test(index) {\r\n            // console.log(this.startTime)\r\n            console.log(index)\r\n            console.log(this.newClassroom)\r\n            console.log(this.classroom)\r\n        },\r\n        submit() {\r\n            //axios\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style >\r\n.el-card__body {\r\n    padding-top: 10px;\r\n}\r\n.classroom-container {\r\n    width: 1200px;\r\n    margin: auto;\r\n    display: flex;\r\n    flex-wrap:wrap;\r\n    justify-content:flex-start;\r\n}\r\n.card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.text {\r\n    font-size: 14px;\r\n}\r\n.box-card {\r\n    margin: 0.9%;\r\n    height: 300px;\r\n\r\n    width: 23%;\r\n}\r\n\r\n.course-container {\r\n    display: flex;\r\n    margin: auto;\r\n    justify-content:center\r\n}\r\n.course-left{\r\n    flex: 0;\r\n    margin-left:200px;\r\n    min-width: 100px;\r\n    padding-right:auto;\r\n    /* padding-bottom:20px; */\r\n    padding-left: auto;\r\n    margin:10px;\r\n    text-align:right;\r\n}\r\n.course-right{\r\n    max-width:800px;\r\n    flex: 1;\r\n}\r\n.class-container {\r\n    width: 600px;\r\n    margin: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}