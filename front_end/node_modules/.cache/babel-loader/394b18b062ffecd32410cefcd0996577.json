{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3458d03e\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"admin\",\n  style: {\n    \"margin\": \"0px auto\"\n  }\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"信息录入\", -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"vertical-align\": \"middle\"\n  }\n}, \" 上传文件 \", -1\n/* HOISTED */\n));\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"el-upload__tip\"\n}, \" 单个csv文件 \", -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  style: {\n    \"vertical-align\": \"middle\"\n  }\n}, \" 提交 \", -1\n/* HOISTED */\n));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_upload = _resolveComponent(\"upload\");\n\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  const _component_el_option = _resolveComponent(\"el-option\");\n\n  const _component_el_select = _resolveComponent(\"el-select\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_check = _resolveComponent(\"check\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createVNode(_component_el_upload, {\n    class: \"upload-demo\",\n    action: $options.Upload,\n    accept: \".csv\",\n    limit: 1,\n    \"before-upload\": $options.onBeforeUpload,\n    data: _ctx.uploadData\n  }, {\n    tip: _withCtx(() => [_hoisted_4]),\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        style: {\n          \"vertical-align\": \"middle\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_upload)]),\n        _: 1\n        /* STABLE */\n\n      }), _hoisted_3]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"action\", \"before-upload\", \"data\"]), _createVNode(_component_el_form, {\n    id: \"admin_container\",\n    ref: \"userData\",\n    model: $data.userData,\n    rules: $data.rules,\n    autocomplete: \"on\",\n    \"text-align:\": \"\",\n    center: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"role\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_select, {\n        modelValue: $data.userData.role,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userData.role = $event),\n        placeholder: \"角色\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_option, {\n          label: \"学生\",\n          value: \"student\"\n        }), _createVNode(_component_el_option, {\n          label: \"教师\",\n          value: \"teacher\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      class: \"college\",\n      prop: \"college\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_select, {\n        modelValue: $data.userData.college,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userData.college = $event),\n        \"value-key\": \"name\",\n        placeholder: \"学院\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.collegeData, colleges => {\n          return _openBlock(), _createBlock(_component_el_option, {\n            key: colleges.id,\n            value: colleges,\n            label: colleges.name\n          }, null, 8\n          /* PROPS */\n          , [\"value\", \"label\"]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      class: \"major\",\n      prop: \"major\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_select, {\n        modelValue: $data.userData.major,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userData.major = $event),\n        placeholder: \"专业\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.userData.college.majors, major => {\n          return _openBlock(), _createBlock(_component_el_option, {\n            key: major.id,\n            value: major.name,\n            label: major.name\n          }, null, 8\n          /* PROPS */\n          , [\"value\", \"label\"]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"name\",\n        modelValue: $data.userData.name,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.userData.name = $event),\n        placeholder: \"姓名\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), $data.userData.role === 'student' ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 0,\n      prop: \"stu_id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"stu_id\",\n        modelValue: $data.userData.stu_id,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.userData.stu_id = $event),\n        modelModifiers: {\n          number: true\n        },\n        placeholder: \"学号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), $data.userData.role === 'teacher' ? (_openBlock(), _createBlock(_component_el_form_item, {\n      key: 1,\n      prop: \"teach_id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"teach_id\",\n        modelValue: $data.userData.teach_id,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.userData.teach_id = $event),\n        modelModifiers: {\n          number: true\n        },\n        placeholder: \"工号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    })) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_form_item, {\n      prop: \"id\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        name: \"id\",\n        modelValue: $data.userData.id,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.userData.id = $event),\n        placeholder: \"身份证号\",\n        type: \"text\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"phone\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"phone\",\n        modelValue: $data.userData.phone,\n        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.userData.phone = $event),\n        placeholder: \"手机号\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, {\n      prop: \"email\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        name: \"email\",\n        modelValue: $data.userData.email,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.userData.email = $event),\n        placeholder: \"邮箱\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        style: {\n          \"display\": \"block\",\n          \"margin\": \"0 auto\"\n        },\n        type: \"primary\",\n        onClick: $options.submit\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, {\n          style: {\n            \"vertical-align\": \"middle\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_check)]),\n          _: 1\n          /* STABLE */\n\n        }), _hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onClick\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","style","_createElementVNode","_createElementBlock","_hoisted_2","_createVNode","_component_el_upload","action","$options","accept","limit","data","_ctx","tip","_hoisted_4","_component_el_button","type","_component_el_icon","_component_upload","_hoisted_3","_component_el_form","id","ref","model","$data","rules","autocomplete","center","_component_el_form_item","prop","_component_el_select","role","$event","placeholder","_component_el_option","label","value","college","_Fragment","_renderList","colleges","_createBlock","key","name","major","majors","_component_el_input","stu_id","number","teach_id","phone","email","onClick","_component_check","_hoisted_5"],"sourceRoot":"","sources":["D:\\fdu\\software_engineering\\Lab\\5-Lab\\front_end\\src\\components\\AdminControl.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin\" style=\"margin:0px auto\">\r\n    <h1>信息录入</h1>\r\n    <el-upload\r\n      class=\"upload-demo\"\r\n      :action=\"Upload\"\r\n      accept=\".csv\"\r\n      :limit=\"1\"\r\n      :before-upload=\"onBeforeUpload\"\r\n      :data=\"uploadData\"\r\n    >\r\n      <el-button type=\"primary\">\r\n        <el-icon style=\"vertical-align: middle;\">\r\n          <upload />\r\n        </el-icon>\r\n        <span style=\"vertical-align: middle;\"> 上传文件 </span>\r\n      </el-button>\r\n<!--      <el-button type=\"primary\">选择文件上传</el-button>-->\r\n      <template #tip>\r\n        <div class=\"el-upload__tip\">\r\n          单个csv文件\r\n        </div>\r\n      </template>\r\n    </el-upload>\r\n    <el-form id=\"admin_container\" ref=\"userData\" :model=\"userData\" :rules=\"rules\" autocomplete=\"on\"  text-align: center>\r\n      <el-form-item prop=\"role\">\r\n        <el-select v-model=\"userData.role\" placeholder=\"角色\">\r\n          <el-option label=\"学生\" value=\"student\"></el-option>\r\n          <el-option label=\"教师\" value=\"teacher\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"college\" prop=\"college\">\r\n        <el-select v-model=\"userData.college\" value-key=\"name\" placeholder=\"学院\">\r\n          <el-option :key=\"colleges.id\" :value=\"colleges\" :label=\"colleges.name\" v-for=\"colleges in collegeData\" ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item class=\"major\" prop=\"major\" >\r\n        <el-select v-model=\"userData.major\" placeholder=\"专业\">\r\n          <el-option :key=\"major.id\" :value=\"major.name\" :label=\"major.name\" v-for=\"major in userData.college.majors\" ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      \r\n      <el-form-item prop=\"name\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          v-model=\"userData.name\"\r\n          placeholder=\"姓名\"\r\n        />\r\n      </el-form-item> \r\n\r\n      <el-form-item v-if=\"userData.role==='student'\" prop=\"stu_id\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"stu_id\"\r\n          v-model.number=\"userData.stu_id\"\r\n          placeholder=\"学号\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item v-if=\"userData.role==='teacher'\" prop=\"teach_id\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"teach_id\"\r\n          v-model.number=\"userData.teach_id\"\r\n          placeholder=\"工号\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"id\">\r\n        <el-input\r\n          name=\"id\"\r\n          v-model=\"userData.id\"\r\n          placeholder=\"身份证号\"\r\n          type=\"text\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item prop=\"phone\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"phone\"\r\n          v-model=\"userData.phone\"\r\n          placeholder=\"手机号\"\r\n        />\r\n      </el-form-item> \r\n\r\n      <el-form-item prop=\"email\">\r\n        <el-input\r\n          type=\"text\"\r\n          name=\"email\"\r\n          v-model=\"userData.email\"\r\n          placeholder=\"邮箱\"\r\n        />\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button style=\"display:block;margin:0 auto\" type=\"primary\" @click=\"submit\">\r\n          <el-icon style=\"vertical-align: middle;\">\r\n            <check />\r\n          </el-icon>\r\n          <span style=\"vertical-align: middle;\"> 提交 </span>\r\n        </el-button>\r\n\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {Check,Upload} from \"@element-plus/icons\";\r\nimport axios from 'axios'\r\n\r\nimport {validName,validPhone,validPassport,validEmail} from './jsComponents/CheckRules'\r\n//格式检查\r\n\r\nexport default {\r\n\r\n  name: 'AdminControl',\r\n  components:{\r\n    Check,\r\n    Upload\r\n  },\r\n\r\n  data(){\r\n    return {\r\n      collegeData: [\r\n        { \r\n          id: 1,\r\n          name: '计算机科学技术学院', \r\n          majors: [\r\n              {id: 1, name: '大数据'},\r\n              {id: 2, name: '信息安全'}\r\n          ]\r\n        },\r\n        { \r\n          id: 1,\r\n          name: '生命科学学院', \r\n          majors: [\r\n              {id: 1, name: '生物'},\r\n              {id: 2, name: '123'}\r\n          ]\r\n        },\r\n        { \r\n          id: 1,\r\n          name: '软件工程学院', \r\n          majors: [\r\n              {id: 1, name: '软件工程'},\r\n          ]\r\n        },\r\n      ],\r\n      majorData: [\r\n      ],\r\n      userData: {\r\n        number: null,\r\n        role: 'student',\r\n        name: '',\r\n        id: '',\r\n        phone: '',\r\n        email: '',\r\n        stu_id: null,\r\n        teach_id: null,\r\n        password: '123456',\r\n        major: '',\r\n        college: {},\r\n      },\r\n      collegeBackup: {},\r\n      majorBackup: '',\r\n      rules: {\r\n        college: [{required: true, message: '请选择学院', trigger: 'change'}],\r\n        major: [{required: true, message: '请选择专业', trigger: 'change'}],\r\n        role: [{required: true, message: '请选择身份', trigger: 'change'}],\r\n        stu_id: [{required: true, message: '学号不能为空', trigger: 'blur'},\r\n                 {pattern: /^\\d{6,6}$/, message: '学号为6位数字', trigger: 'blur'},\r\n                 {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '学号必须为注册年份后两位开头的数字(小于22)'}],\r\n        teach_id: [{required: true, message: '工号不能为空', trigger: 'blur'},\r\n                 {pattern: /^\\d{8,8}$/, message: '工号为8位数字', trigger: 'blur'},\r\n                 {pattern: /^[0-1][0-9][0-9]*$|^2[0-2][0-9]*$/, message: '工号必须为注册年份后两位开头的数字(小于22)'}],\r\n        name: [{required: true, message: '姓名不能为空', trigger: 'blur'},\r\n               {validator: validName, trigger: ['blur', 'change']}],\r\n        id: [{ required: true, message: '身份证不能为空', trigger: 'blur'},\r\n                   { validator: validPassport, trigger: 'blur' }],\r\n        phone: [{required: false, trigger: ['blur', 'change']},\r\n                {validator: validPhone, trigger: 'blur'}],\r\n        email: [{required: false, trigger: 'blur'},\r\n                {validator: validEmail, trigger: 'blur'}],\r\n      }\r\n    }\r\n  },\r\n  watch:{\r\n    //如果没有.name会出错，因为在college = college.name赋值中改变了college，但不会认为college.name改变（此时不希望watch被触发）    \r\n    \"userData.college.name\": {\r\n      handler(){\r\n        // console.log(this.userData.college)\r\n        this.userData.major='';  \r\n      },\r\n    }\r\n  },\r\n  methods:{\r\n    submit(){\r\n      this.$refs['userData'].validate(valid => {\r\n        if(valid){\r\n          if(this.userData.role == 'student')\r\n            this.userData.number = this.userData.stu_id\r\n          if(this.userData.role == 'teacher')\r\n            this.userData.number = this.userData.teach_id\r\n          this.collegeBackup = this.userData.college\r\n          this.majorBackup = this.userData.major\r\n          this.userData.college = this.userData.college.name\r\n          // axios.post('http://localhost:8081/register', null, {params:this.userData})\r\n          axios.post('http://localhost:8081/admin/new', this.userData)\r\n          .then(function(resp){\r\n            console.log(resp)\r\n            alert('提交成功')\r\n              \r\n          }).catch(error => {\r\n            if(error.response.status == 421){\r\n              if(this.userData.role == 'student')\r\n                alert('学号已存在')\r\n              else\r\n                alert('工号已存在')\r\n              this.userData.stu_id = ''\r\n              this.userData.teach_id = ''\r\n            }\r\n            if(error.response.status == 420){\r\n              alert('身份证已存在');\r\n              this.userData.id = ''\r\n            }\r\n            console.dir(error);\r\n          })\r\n          console.log(this.userData)\r\n          this.userData.college = this.collegeBackup\r\n          this.userData.major = this.majorBackup\r\n        }\r\n        else{\r\n          console.log('error ssssubmit');\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    onBeforeUpload(file) {\r\n      const isCSV = file.type === 'application/vnd.ms-excel'\r\n\r\n      if (!isCSV) {\r\n        this.$message.error('上传文件只能是.csv格式!');\r\n      }\r\n    \r\n      return isCSV;\r\n    },\r\n    Upload(file) {\r\n      let param = new FormData(); \r\n      param.append('file',file)\r\n      axios.post(\"http://localhost:8081/admin/users\",param)\r\n        .then(function(){\r\n          alert('批量导入信息完成，无导入失败')                  \r\n        }).catch(error => {\r\n          alert(error.response.message)\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    axios.get(\"http://localhost:8081/admin/edu\")\r\n      .then(res => {\r\n        this.collegeData = res.data.data\r\n        for(let i in this.collegeData) {//替换变量名,对应后端数据\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOId/g,\"id\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorId/g,\"id\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/collegeVOName/g,\"name\"))\r\n          this.collegeData[i] = JSON.parse(JSON.stringify(this.collegeData[i]).replace(/majorName/g,\"name\"))\r\n        }\r\n      }).catch(error => {\r\n        alert('获取服务器信息失败')\r\n        console.dir(error);\r\n      });\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.admin{\r\n  position: absolute;\r\n  width: 500px;\r\n  height: 300px;\r\n  margin: auto;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n/* #container {\r\n  border-radius: 15px;\r\n  margin: 0px auto;\r\n  width: 500px;\r\n  padding: 35px 35px;\r\n  background: #fff;\r\n} */\r\n\r\nh3 {\r\n  margin: 40px 0 0;\r\n}\r\n\r\n.college {\r\n  float: left;\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}