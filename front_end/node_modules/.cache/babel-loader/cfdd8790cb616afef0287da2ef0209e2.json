{"ast":null,"code":"import { setCourseTime } from '../jsComponents/CourseSet';\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\nimport global_ from '../jsComponents/global';\nimport { Search } from '@element-plus/icons-vue';\nexport default {\n  components: {\n    Search\n  },\n\n  data() {\n    return {\n      CLOSE: global_.CLOSE,\n      ONE_OFF: global_.ONE_OFF,\n      ONE_ON: global_.ONE_ON,\n      TWO_OFF: global_.TWO_OFF,\n      TWO_ON: global_.TWO_ON,\n      dialogAvlVis: [false, false, false, false, false, false, false, false],\n      majorAvlVis: [false, false, false, false, false, false, false, false, false, false, false, false],\n      dialogSelVis: [false, false, false, false, false, false, false, false],\n      majorSelVis: [false, false, false, false, false, false, false, false, false, false, false, false],\n      dialogStuVis: [false, false, false, false, false, false, false, false],\n      majorStuVis: [false, false, false, false, false, false, false, false, false, false, false, false],\n      semesters: global_.semesters,\n      years: global_.years,\n      activeName: 'available',\n      searchContent: '',\n      courseStatus: '1',\n      courses: [{\n        courseId: 1,\n        courseName: '软件工程',\n        courseNum: 'SOFT220011',\n        classHours: '4',\n        credits: '4',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [1, 2, 3, 5, 6, 8, 10, 11, 12], [3], [], [], [], []],\n        building: 'H3',\n        roomNum: '301',\n        courseInfo: '123',\n        selected: '80',\n        capacity: '100',\n        type: 'normal'\n      }, {\n        courseId: 2,\n        courseName: '离散数学',\n        courseNum: 'SOFT220022',\n        classHours: '3',\n        credits: '5',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [], [], [3, 8], []],\n        building: 'HGX',\n        roomNum: '502',\n        courseInfo: '123',\n        selected: '100',\n        capacity: '100',\n        type: 'normal'\n      }],\n      selectedCourses: [{\n        courseId: 1,\n        courseName: '软件',\n        courseNum: 'SOFT220011',\n        classHours: '4',\n        credits: '4',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [1, 2, 3, 5, 6, 8, 10, 11, 12], [3], [], [], [], []],\n        building: 'H3',\n        roomNum: '301',\n        courseInfo: '123',\n        selected: '80',\n        capacity: '100',\n        type: 'normal'\n      }, {\n        courseId: 2,\n        courseName: '数学',\n        courseNum: 'SOFT220022',\n        classHours: '3',\n        credits: '5',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [], [], [3, 8], []],\n        building: 'HGX',\n        roomNum: '502',\n        courseInfo: '123',\n        selected: '100',\n        capacity: '100',\n        type: 'normal'\n      }],\n      studiedCourses: [{\n        courseId: 1,\n        courseName: '软件',\n        courseNum: 'SOFT220011',\n        classHours: '4',\n        credits: '4',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [1, 2, 3, 5, 6, 8, 10, 11, 12], [3], [], [], [], []],\n        building: 'H3',\n        roomNum: '301',\n        courseInfo: '123',\n        commonCourse: '专业课程',\n        majors: [[\"计算机科学技术学院\", \"大数据\"], [\"计算机科学技术学院\", \"信息安全\"], ['软件工程学院', '软件工程']],\n        year: '2021-2022',\n        semester: '春'\n      }, {\n        courseId: 2,\n        courseName: '数学',\n        courseNum: 'SOFT220022',\n        classHours: '3',\n        credits: '5',\n        courseTime: '',\n        collegeId: '',\n        collegeName: '计算机与技术学院',\n        times: [[], [], [], [3, 8], []],\n        building: 'HGX',\n        roomNum: '502',\n        courseInfo: '321',\n        commonCourse: '通选课程',\n        majors: [],\n        year: '2020-2021',\n        semester: '秋'\n      }]\n    };\n  },\n\n  computed: {\n    yearFilters() {\n      let obj = [];\n\n      for (let i = 0; i < this.years.length; i++) {\n        obj.push({\n          text: this.years[i] + this.semesters[0],\n          value: this.years[i] + this.semesters[0]\n        });\n        obj.push({\n          text: this.years[i] + this.semesters[1],\n          value: this.years[i] + this.semesters[1]\n        });\n      }\n\n      return obj;\n    }\n\n  },\n  methods: {\n    submitSearch() {\n      console.log(this.searchContent); //axios searchContent\n    },\n\n    resetSearch() {//axios\n    },\n\n    handleClick(tab, event) {\n      console.log(tab, event);\n\n      if (tab.props.name == 'available') {\n        //axios获取可选课程\n        console.log(1);\n      }\n\n      if (tab.props.name == 'selected') {\n        //axios获取已选课程\n        console.log(2);\n      }\n\n      if (tab.props.name == 'studied') {\n        //axios获取已修课程\n        console.log(3);\n      }\n    },\n\n    selectCourse(index) {\n      // this.selectedCourses.push(this.courses[index])\n      this.courses.splice(index, 1);\n      ElMessage({\n        type: 'success',\n        message: '选课成功！'\n      });\n    },\n\n    quitCourse(index) {\n      this.courses.push(this.selectedCourses[index]); // this.selectedCourses.splice(index,1) \n\n      ElMessage({\n        type: 'success',\n        message: '退课成功'\n      });\n    },\n\n    filterYear(value, row) {\n      return row['year'] + row['semester'] === value;\n    }\n\n  },\n\n  async created() {\n    axios.get('http://localhost:8081/user/curriculaVariable').then(res => {\n      this.courseStatus = res.data.data1;\n    }).catch(error => {\n      console.dir(error);\n    });\n    await axios.get('http://localhost:8081/student/course').then(res => {\n      this.courses = res.data.data1;\n    });\n\n    for (let course of this.courses) {\n      this.dialogTableVisible.push(false);\n      course.courseTime = '';\n      setCourseTime(course, course.times);\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["setCourseTime","ElMessage","axios","global_","Search","components","data","CLOSE","ONE_OFF","ONE_ON","TWO_OFF","TWO_ON","dialogAvlVis","majorAvlVis","dialogSelVis","majorSelVis","dialogStuVis","majorStuVis","semesters","years","activeName","searchContent","courseStatus","courses","courseId","courseName","courseNum","classHours","credits","courseTime","collegeId","collegeName","times","building","roomNum","courseInfo","selected","capacity","type","selectedCourses","studiedCourses","commonCourse","majors","year","semester","computed","yearFilters","obj","i","length","push","text","value","methods","submitSearch","console","log","resetSearch","handleClick","tab","event","props","name","selectCourse","index","splice","message","quitCourse","filterYear","row","created","get","then","res","data1","catch","error","dir","course","dialogTableVisible"],"sourceRoot":"","sources":["D:\\desktop\\5-Lab\\front_end\\src\\components\\course\\StudentCourse.vue"],"sourcesContent":["<template>\r\n    <div v-if=\"courseStatus == CLOSE\"> <h2>选课时间未到</h2></div>\r\n    <div v-if=\"courseStatus == ONE_OFF\"> <h2>第一轮选课已结束，请等待第二轮选课开始</h2></div>\r\n    <div v-if=\"courseStatus == TWO_OFF\"> <h2>第二轮选课已结束</h2></div>\r\n    <div v-if=\"courseStatus == ONE_ON || courseStatus == TWO_ON\">\r\n        <el-tabs v-model=\"activeName\" type=\"border-card\" @tab-click=\"handleClick\">\r\n            <el-tab-pane label=\"可选课程\" name=\"available\">\r\n                <h2>可选课程</h2>\r\n                <el-input class=\"search\" size=\"large\" placeholder=\"搜索课程\" v-model=\"searchContent\" @keyup.enter=\"submitSearch\">\r\n                    <template #suffix>\r\n                        <el-icon @click=\"submitSearch\" class=\"el-input__icon\"><search /></el-icon>\r\n                    </template>\r\n                </el-input>\r\n                <el-button @click=\"resetSearch\" type=\"primary\" style=\"margin-left: 210px\">查看全部可选课程</el-button>\r\n                <!-- <el-button @click=\"test\">test </el-button> -->\r\n                <el-table class=\"class-table\" :data=\"courses\" max-height=\"500px\">\r\n                    <el-table-column fixed prop=\"courseName\" label=\"课程名\" width=\"150\" />\r\n                    <el-table-column fixed prop=\"courseNum\" label=\"课程编号\" width=\"140\" />\r\n                    <el-table-column prop=\"collegeName\" label=\"开课院系\" width=\"180\" />\r\n                    <el-table-column prop=\"teacherName\" label=\"课程教师姓名\" width=\"120\" />\r\n                    <el-table-column prop=\"commonCourse\" label=\"课程类型\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <div v-if=\"scope.row.commonCourse == '通选课程'\">通选课程</div>\r\n                            <div v-if=\"scope.row.commonCourse == '专业课程'\">\r\n                                <span style=\"padding-right:10px\">专业课程</span>\r\n                                <el-button type=\"text\" @click=\"majorAvlVis[scope.$index] = true\">查看专业</el-button>\r\n                                <el-dialog v-model=\"majorAvlVis[scope.$index]\" title=\"课程可选专业\" :append-to-body=\"true\">\r\n                                    <div v-for=\"major in scope.row.majors\" :key=\"major\">\r\n                                        {{major[1]}} ({{major[0]}})\r\n                                    </div>\r\n                                </el-dialog>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"classHours\" label=\"学时\" width=\"60\" />\r\n                    <el-table-column prop=\"credits\" label=\"学分\" width=\"60\" />\r\n                    <el-table-column prop=\"building,roomNum\" label=\"上课地点\" width=\"80\" >\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.building}}{{scope.row.roomNum}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseTime\" label=\"上课时间\" width=\"180\" />\r\n                    <el-table-column prop=\"capacity,selected\" label=\"选课人数\" width=\"150\">\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.selected}}/{{scope.row.capacity}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseInfo\" label=\"介绍\" width=\"150\" >\r\n                        <template #default=\"scope\">\r\n                            <el-button type=\"text\" @click=\"dialogAvlVis[scope.$index] = true\">查看详情</el-button>\r\n                            <el-dialog v-model=\"dialogAvlVis[scope.$index]\" title=\"课程介绍\" :append-to-body=\"true\">\r\n                            {{scope.row.courseInfo}}\r\n                            </el-dialog>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <el-button @click=\"selectCourse(scope.$index)\" type=\"primary\" round>选课</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>  \r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"已选课程\" name=\"selected\">\r\n                <h2>已选课程</h2>\r\n                <!-- <el-button @click=\"test\">test </el-button> -->\r\n                <el-table class=\"class-table\" :data=\"selectedCourses\"  max-height=\"500px\">\r\n                    <el-table-column fixed prop=\"courseName\" label=\"课程名\" width=\"150\" />\r\n                    <el-table-column fixed prop=\"courseNum\" label=\"课程编号\" width=\"140\" />\r\n                    <el-table-column prop=\"collegeName\" label=\"开课院系\" width=\"180\" />\r\n                    <el-table-column prop=\"teacherName\" label=\"课程教师姓名\" width=\"120\" />\r\n                    <el-table-column prop=\"commonCourse\" label=\"课程类型\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <div v-if=\"scope.row.commonCourse == '通选课程'\">通选课程</div>\r\n                            <div v-if=\"scope.row.commonCourse == '专业课程'\">\r\n                                <span style=\"padding-right:10px\">专业课程</span>\r\n                                <el-button type=\"text\" @click=\"majorSelVis[scope.$index] = true\">查看专业</el-button>\r\n                                <el-dialog v-model=\"majorSelVis[scope.$index]\" title=\"课程可选专业\" :append-to-body=\"true\">\r\n                                    <div v-for=\"major in scope.row.majors\" :key=\"major\">\r\n                                        {{major[1]}} ({{major[0]}})\r\n                                    </div>\r\n                                </el-dialog>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"classHours\" label=\"学时\" width=\"60\" />\r\n                    <el-table-column prop=\"credits\" label=\"学分\" width=\"60\" />\r\n                    <el-table-column prop=\"building,roomNum\" label=\"上课地点\" width=\"80\" >\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.building}}{{scope.row.roomNum}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseTime\" label=\"上课时间\" width=\"180\" />\r\n                    <el-table-column prop=\"capacity,selected\" label=\"选课人数\" width=\"150\">\r\n                        <template #default=\"scope\">\r\n                            {{scope.row.selected}}/{{scope.row.capacity}}\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"courseInfo\" label=\"介绍\" width=\"150\" >\r\n                        <template #default=\"scope\">\r\n                            <el-button type=\"text\" @click=\"dialogSelVis[scope.$index] = true\">查看详情</el-button>\r\n                            <el-dialog v-model=\"dialogSelVis[scope.$index]\" title=\"课程介绍\" :append-to-body=\"true\">\r\n                            {{scope.row.courseInfo}}\r\n                            </el-dialog>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column fixed=\"right\" label=\"操作\" width=\"180\">\r\n                        <template #default=\"scope\">\r\n                            <el-button @click=\"quitCourse(scope.$index)\">退课</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table> \r\n            </el-tab-pane>\r\n            <el-tab-pane label=\"已修课程\" name=\"studied\">\r\n                    <h2>已修课程</h2>\r\n                    <el-table class=\"class-table\" :data=\"studiedCourses\" max-height=\"500px\">\r\n                        <el-table-column fixed prop=\"courseName\" label=\"课程名\" width=\"150\" />\r\n                        <el-table-column fixed prop=\"courseNum\" label=\"课程编号\" width=\"140\" />\r\n                        <el-table-column prop=\"year,semester\" label=\"修读学期\" width=\"180\"\r\n                            :filter-multiple=\"true\"\r\n                            :filters=\"yearFilters\"\r\n                            :filter-method=\"filterYear\">\r\n                            <template #default=\"scope\">\r\n                                {{scope.row.year}}{{scope.row.semester}}\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"collegeName\" label=\"开课院系\" width=\"180\" />\r\n                        <el-table-column prop=\"teacherName\" label=\"课程教师姓名\" width=\"120\" />\r\n                        <el-table-column prop=\"commonCourse\" label=\"课程类型\" width=\"180\">\r\n                            <template #default=\"scope\">\r\n                                <div v-if=\"scope.row.commonCourse == '通选课程'\">通选课程</div>\r\n                                <div v-if=\"scope.row.commonCourse == '专业课程'\">\r\n                                    <span style=\"padding-right:10px\">专业课程</span>\r\n                                    <el-button type=\"text\" @click=\"majorStuVis[scope.$index] = true\">查看专业</el-button>\r\n                                    <el-dialog v-model=\"majorStuVis[scope.$index]\" title=\"课程可选专业\" :append-to-body=\"true\">\r\n                                        <div v-for=\"major in scope.row.majors\" :key=\"major\">\r\n                                            {{major[1]}} ({{major[0]}})\r\n                                        </div>\r\n                                    </el-dialog>\r\n                                </div>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"classHours\" label=\"学时\" width=\"60\" />\r\n                        <el-table-column prop=\"credits\" label=\"学分\" width=\"60\" />\r\n                        <el-table-column prop=\"building,roomNum\" label=\"上课地点\" width=\"100\">\r\n                            <template #default=\"scope\">\r\n                                {{scope.row.building}}{{scope.row.roomNum}}\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column prop=\"courseTime\" label=\"上课时间\" width=\"180\" />\r\n                        <el-table-column prop=\"courseInfo\" label=\"介绍\" width=\"150\" >\r\n                            <template #default=\"scope\">\r\n                                <el-button type=\"text\" @click=\"dialogStuVis[scope.$index] = true\">查看详情</el-button>\r\n                                <el-dialog v-model=\"dialogStuVis[scope.$index]\" title=\"课程介绍\" :append-to-body=\"true\">\r\n                                {{scope.row.courseInfo}}\r\n                                </el-dialog>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>  \r\n            </el-tab-pane>\r\n        </el-tabs>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {setCourseTime} from '../jsComponents/CourseSet'\r\nimport { ElMessage} from 'element-plus'\r\nimport axios from 'axios'\r\nimport global_ from '../jsComponents/global'\r\nimport { Search } from '@element-plus/icons-vue'\r\nexport default {\r\n    components: {\r\n        Search\r\n    },\r\n    data() {\r\n        return {\r\n            CLOSE: global_.CLOSE,\r\n            ONE_OFF: global_.ONE_OFF,\r\n            ONE_ON: global_.ONE_ON,\r\n            TWO_OFF: global_.TWO_OFF,\r\n            TWO_ON: global_.TWO_ON,\r\n            dialogAvlVis:[false,false,false,false,false,false,false,false,],\r\n            majorAvlVis:[false,false,false,false,false,false,false,false,false,false,false,false,],\r\n            dialogSelVis:[false,false,false,false,false,false,false,false,],\r\n            majorSelVis:[false,false,false,false,false,false,false,false,false,false,false,false,],\r\n            dialogStuVis:[false,false,false,false,false,false,false,false,],\r\n            majorStuVis:[false,false,false,false,false,false,false,false,false,false,false,false,],\r\n            semesters: global_.semesters,\r\n            years: global_.years,\r\n            activeName: 'available',\r\n            searchContent: '',\r\n            courseStatus: '1',\r\n            courses: [\r\n                {\r\n                    courseId: 1,\r\n                    courseName: '软件工程',\r\n                    courseNum: 'SOFT220011',\r\n                    classHours: '4',\r\n                    credits: '4',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [1,2,3,5,6,8,10,11,12],\r\n                        [3],\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        []\r\n                    ],\r\n                    building: 'H3',\r\n                    roomNum: '301',\r\n                    courseInfo: '123',\r\n                    selected: '80',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                },\r\n                {\r\n                    courseId: 2,\r\n                    courseName: '离散数学',\r\n                    courseNum: 'SOFT220022',\r\n                    classHours: '3',\r\n                    credits: '5',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        [3,8],\r\n                        []\r\n                    ],\r\n                    building: 'HGX',\r\n                    roomNum: '502',\r\n                    courseInfo: '123',\r\n                    selected: '100',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                }\r\n            ],\r\n            selectedCourses: [\r\n                {\r\n                    courseId: 1,\r\n                    courseName: '软件',\r\n                    courseNum: 'SOFT220011',\r\n                    classHours: '4',\r\n                    credits: '4',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [1,2,3,5,6,8,10,11,12],\r\n                        [3],\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        []\r\n                    ],\r\n                    building: 'H3',\r\n                    roomNum: '301',\r\n                    courseInfo: '123',\r\n                    selected: '80',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                },\r\n                {\r\n                    courseId: 2,\r\n                    courseName: '数学',\r\n                    courseNum: 'SOFT220022',\r\n                    classHours: '3',\r\n                    credits: '5',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        [3,8],\r\n                        []\r\n                    ],\r\n                    building: 'HGX',\r\n                    roomNum: '502',\r\n                    courseInfo: '123',\r\n                    selected: '100',\r\n                    capacity: '100',\r\n                    type: 'normal',\r\n                }\r\n            ],\r\n            studiedCourses: [\r\n                {\r\n                    courseId: 1,\r\n                    courseName: '软件',\r\n                    courseNum: 'SOFT220011',\r\n                    classHours: '4',\r\n                    credits: '4',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [1,2,3,5,6,8,10,11,12],\r\n                        [3],\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        []\r\n                    ],\r\n                    building: 'H3',\r\n                    roomNum: '301',\r\n                    courseInfo: '123',\r\n                    commonCourse: '专业课程',\r\n                    majors: [\r\n                                [\"计算机科学技术学院\",\"大数据\"],\r\n                                [\"计算机科学技术学院\",\"信息安全\"],\r\n                                ['软件工程学院','软件工程']\r\n                            ],\r\n                    year:'2021-2022',\r\n                    semester:'春'\r\n                },\r\n                {\r\n                    courseId: 2,\r\n                    courseName: '数学',\r\n                    courseNum: 'SOFT220022',\r\n                    classHours: '3',\r\n                    credits: '5',\r\n                    courseTime:'',\r\n                    collegeId: '',\r\n                    collegeName: '计算机与技术学院',\r\n                    times: [\r\n                        [],\r\n                        [],\r\n                        [],\r\n                        [3,8],\r\n                        []\r\n                    ],\r\n                    building: 'HGX',\r\n                    roomNum: '502',\r\n                    courseInfo: '321',\r\n                    commonCourse: '通选课程',\r\n                    majors: [],\r\n                    year:'2020-2021',\r\n                    semester:'秋'\r\n                }\r\n            ],\r\n        }\r\n    },\r\n    computed: {\r\n        yearFilters() {\r\n            let obj = []\r\n            for(let i = 0; i < this.years.length; i++) {\r\n                obj.push({\r\n                    text:this.years[i]+this.semesters[0],\r\n                    value:this.years[i]+this.semesters[0],\r\n                })\r\n                obj.push({\r\n                    text:this.years[i]+this.semesters[1],\r\n                    value:this.years[i]+this.semesters[1],\r\n                })\r\n            }\r\n            return obj\r\n        },\r\n    },\r\n    methods: {\r\n         submitSearch() {\r\n            console.log(this.searchContent)\r\n            //axios searchContent\r\n          \r\n        },\r\n        resetSearch() {\r\n            //axios\r\n         \r\n        },\r\n        handleClick(tab, event) {\r\n            console.log(tab,event)\r\n            if(tab.props.name == 'available'){\r\n                //axios获取可选课程\r\n                console.log(1)\r\n            }\r\n            if(tab.props.name == 'selected') {\r\n                //axios获取已选课程\r\n                console.log(2)\r\n            }\r\n            if(tab.props.name == 'studied') {\r\n                //axios获取已修课程\r\n                console.log(3)\r\n            }\r\n        },\r\n        selectCourse(index) {\r\n            // this.selectedCourses.push(this.courses[index])\r\n            this.courses.splice(index,1)\r\n            ElMessage({\r\n                type: 'success',\r\n                message: '选课成功！',\r\n            })\r\n        },\r\n        quitCourse(index) {\r\n            this.courses.push(this.selectedCourses[index])\r\n            // this.selectedCourses.splice(index,1) \r\n            ElMessage({\r\n                type: 'success',\r\n                message: '退课成功',\r\n            })\r\n        },\r\n        filterYear(value, row) {\r\n            return row['year'] + row['semester'] === value\r\n        },\r\n    },\r\n    async created() {\r\n        axios.get('http://localhost:8081/user/curriculaVariable')\r\n        .then(res => {\r\n            this.courseStatus = res.data.data1\r\n        })\r\n        .catch(error => {\r\n            console.dir(error)\r\n        })\r\n        await axios.get('http://localhost:8081/student/course')\r\n        .then(res => {\r\n            this.courses = res.data.data1\r\n        })\r\n        for(let course of this.courses) {\r\n            this.dialogTableVisible.push(false)\r\n            course.courseTime = ''\r\n            setCourseTime(course, course.times)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.search {\r\n    display: block;\r\n    float: right;\r\n    width: 200px;\r\n    margin-bottom: 50px;\r\n}\r\n.search .el-input__suffix {\r\n    cursor: pointer;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}